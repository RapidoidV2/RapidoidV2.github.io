<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<meta name="author" content="Nikolche Mihajlovski">
<title>Rapidoid Documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Rapidoid Documentation</h1>
<div class="details">
<span id="author" class="author">Nikolche Mihajlovski</span><br>
<span id="email" class="email"><a href="mailto:rapidoid@googlegroups.com">rapidoid@googlegroups.com</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_what_is_rapidoid">1. What is Rapidoid?</a></li>
<li><a href="#_web_framework_or_dockerized_web_platform">2. Web Framework or Dockerized Web Platform?</a></li>
<li><a href="#_quick_start">3. Quick start</a></li>
<li><a href="#_request_routing">4. Request routing</a>
<ul class="sectlevel2">
<li><a href="#_matching_route">4.1. Matching route</a></li>
<li><a href="#_generic_handlers">4.2. Generic handlers</a></li>
<li><a href="#_not_found">4.3. Not found</a></li>
</ul>
</li>
<li><a href="#_performance">5. Performance</a>
<ul class="sectlevel2">
<li><a href="#_managed_vs_unmanaged_request_handlers">5.1. Managed vs unmanaged request handlers</a></li>
<li><a href="#_asynchronous_handlers">5.2. Asynchronous handlers</a></li>
</ul>
</li>
<li><a href="#_profiles">6. Profiles</a>
<ul class="sectlevel2">
<li><a href="#_the_default_profile">6.1. The default profile</a></li>
<li><a href="#_conditionally_activated_profiles">6.2. Conditionally activated profiles</a></li>
<li><a href="#_configuring_active_profiles">6.3. Configuring active profiles</a></li>
<li><a href="#_built_in_profile_specific_configuration">6.4. Built-in profile-specific configuration</a></li>
</ul>
</li>
<li><a href="#_serving_static_files">7. Serving static files</a>
<ul class="sectlevel2">
<li><a href="#_built_in_static_resources">7.1. Built-in static resources</a></li>
<li><a href="#_automatically_serving_the_static_resources">7.2. Automatically serving the static resources</a></li>
</ul>
</li>
<li><a href="#_restful_services">8. RESTful services</a>
<ul class="sectlevel2">
<li><a href="#_minimal_dependency">8.1. Minimal dependency</a></li>
</ul>
</li>
<li><a href="#_session_management">9. Session management</a>
<ul class="sectlevel2">
<li><a href="#_server_side_session_a_k_a_em_session_em">9.1. Server-side session a.k.a. <em>session</em></a></li>
<li><a href="#_client_side_token_as_a_session_a_k_a_em_token_em">9.2. Client-side token as a session a.k.a. <em>token</em></a></li>
<li><a href="#_configuring_the_token">9.3. Configuring the token</a></li>
</ul>
</li>
<li><a href="#_dependency_injection">10. Dependency injection</a>
<ul class="sectlevel2">
<li><a href="#_annotations">10.1. Annotations</a></li>
<li><a href="#_singleton_scope_only">10.2. Singleton scope only</a></li>
<li><a href="#_auto_run_main_entry_points">10.3. Auto-run main entry points</a></li>
</ul>
</li>
<li><a href="#_security">11. Security</a>
<ul class="sectlevel2">
<li><a href="#_access_denied">11.1. Access denied</a></li>
<li><a href="#_configuring_required_roles">11.2. Configuring required roles</a></li>
</ul>
</li>
<li><a href="#_authentication">12. Authentication</a>
<ul class="sectlevel2">
<li><a href="#_bootstrapping_the_authentication_services">12.1. Bootstrapping the authentication services</a></li>
<li><a href="#_authentication_flow">12.2. Authentication flow</a></li>
<li><a href="#_the_admin_api">12.3. The Admin API</a></li>
<li><a href="#_custom_authentication_tokens">12.4. Custom authentication tokens</a></li>
</ul>
</li>
<li><a href="#_configuration">13. Configuration</a>
<ul class="sectlevel2">
<li><a href="#_the_built_in_configuration">13.1. The built-in configuration</a></li>
<li><a href="#_custom_configuration">13.2. Custom configuration</a></li>
<li><a href="#_profiles_2">13.3. Profiles</a></li>
<li><a href="#_external_configuration_files">13.4. External configuration files</a></li>
</ul>
</li>
<li><a href="#_multiple_servers_setup">14. Multiple servers setup</a>
<ul class="sectlevel2">
<li><a href="#_bootstrapping_multiple_servers">14.1. Bootstrapping multiple servers</a></li>
</ul>
</li>
<li><a href="#_jdbc">15. JDBC</a>
<ul class="sectlevel2">
<li><a href="#_api">15.1. API</a></li>
<li><a href="#_connection_pools">15.2. Connection pools</a></li>
<li><a href="#_providing_custom_datasource">15.3. Providing custom DataSource</a></li>
<li><a href="#_paging">15.4. Paging</a></li>
</ul>
</li>
<li><a href="#_jpa">16. JPA</a>
<ul class="sectlevel2">
<li><a href="#_api_2">16.1. API</a></li>
<li><a href="#_bootstrap">16.2. Bootstrap</a></li>
<li><a href="#_connection_pools_2">16.3. Connection pools</a></li>
</ul>
</li>
<li><a href="#_transactions">17. Transactions</a></li>
<li><a href="#_configuring_the_database">18. Configuring the database</a>
<ul class="sectlevel2">
<li><a href="#_embedded_hsql">18.1. Embedded HSQL</a></li>
<li><a href="#_mysql">18.2. MySQL</a></li>
<li><a href="#_postgresql">18.3. PostgreSQL</a></li>
</ul>
</li>
<li><a href="#_rapidoid_s_template_engine">19. Rapidoid&#8217;s template engine</a></li>
<li><a href="#_reverse_proxy_and_load_balancer">20. Reverse proxy and load balancer</a>
<ul class="sectlevel2">
<li><a href="#_configuring">20.1. Configuring</a></li>
</ul>
</li>
<li><a href="#_https_tls">21. HTTPS &amp; TLS</a>
<ul class="sectlevel2">
<li><a href="#_self_signed_certificates">21.1. Self-signed certificates</a></li>
<li><a href="#_configuring_https_tls">21.2. Configuring HTTPS (TLS)</a></li>
</ul>
</li>
<li><a href="#_http_chunked_response">22. HTTP Chunked response</a>
<ul class="sectlevel2">
<li><a href="#_sending_chunked_http_response">22.1. Sending chunked HTTP response</a></li>
</ul>
</li>
<li><a href="#_customization">23. Customization</a>
<ul class="sectlevel2">
<li><a href="#_customizable_components">23.1. Customizable components</a></li>
</ul>
</li>
<li><a href="#_logging">24. Logging</a>
<ul class="sectlevel2">
<li><a href="#_configuring_2">24.1. Configuring</a></li>
</ul>
</li>
<li><a href="#_basic_command_line_arguments">25. Basic command-line arguments</a></li>
<li><a href="#_rapidoid_modules">26. Rapidoid Modules</a>
<ul class="sectlevel2">
<li><a href="#_rapidoid_gui_module">26.1. Rapidoid GUI module</a></li>
<li><a href="#_rapidoid_fluent_module">26.2. Rapidoid Fluent module</a></li>
<li><a href="#_rapidoid_essentials_module">26.3. Rapidoid Essentials module</a></li>
<li><a href="#_rapidoid_web_module">26.4. Rapidoid Web module</a></li>
</ul>
</li>
<li><a href="#_the_http_api">27. The HTTP API</a></li>
<li><a href="#_examples">28. Examples</a>
<ul class="sectlevel2">
<li><a href="#_automatic_construction_and_serialization_of_javabeans">28.1. Automatic Construction and Serialization of JavaBeans</a></li>
<li><a href="#_the_default_configuration">28.2. The default configuration</a></li>
<li><a href="#_edit_bean_properties">28.3. Edit bean properties</a></li>
<li><a href="#_exception_handlers">28.4. Exception handlers</a></li>
<li><a href="#_restful_services_with_lambda_handlers_jpa_jackson_and_bean_validation">28.5. RESTful services with Lambda handlers, JPA, Jackson and Bean Validation</a></li>
<li><a href="#_configuring_rapidoid">28.6. Configuring Rapidoid</a></li>
<li><a href="#_hello_web_pages">28.7. Hello, web pages!</a></li>
<li><a href="#_hello_restful_services">28.8. Hello RESTful services!</a></li>
<li><a href="#_building_html_pages_with_java">28.9. Building HTML pages with Java</a></li>
<li><a href="#_highlighting_text_by_regular_expression_match">28.10. Highlighting Text by Regular Expression Match</a></li>
<li><a href="#_server_configuration">28.11. Server Configuration</a></li>
<li><a href="#_asynchronous_request_processing">28.12. Asynchronous request processing</a></li>
<li><a href="#_more_control_over_the_http_server_setup">28.13. More control over the HTTP server setup</a></li>
<li><a href="#_generic_handlers_match_any_request">28.14. Generic handlers match any request</a></li>
<li><a href="#_returning_a_not_found_result">28.15. Returning a "Not Found" result</a></li>
<li><a href="#_http_redirect">28.16. HTTP redirect</a></li>
<li><a href="#_all_the_request_data_is_in_the_req_req_parameter">28.17. All the request data is in the (Req req) parameter</a></li>
<li><a href="#_rendering_a_http_response">28.18. Rendering a HTTP response</a></li>
<li><a href="#_manipulating_the_response_code">28.19. Manipulating the response code</a></li>
<li><a href="#_manipulating_the_response_content_type">28.20. Manipulating the response content type</a></li>
<li><a href="#_http_handlers_and_routing">28.21. HTTP handlers and routing</a></li>
<li><a href="#_server_side_session_a_k_a_session">28.22. Server-side session (a.k.a. Session)</a></li>
<li><a href="#_restful_service_one_liner">28.23. RESTful service one-liner</a></li>
<li><a href="#_instant_web_application">28.24. Instant web application</a></li>
<li><a href="#_stopping_the_server">28.25. Stopping the server</a></li>
<li><a href="#_client_side_token_as_a_session">28.26. Client-side Token as a session</a></li>
<li><a href="#_request_wrappers_interceptors">28.27. Request wrappers (interceptors)</a></li>
<li><a href="#_dependency_injection_of_singletons">28.28. Dependency injection of singletons</a></li>
<li><a href="#_restful_services_with_jpa_crud">28.29. RESTful services with JPA CRUD</a></li>
<li><a href="#_jpa_scaffolding">28.30. JPA Scaffolding</a></li>
<li><a href="#_bootstrap_based_gui_layout">28.31. Bootstrap-based GUI layout</a></li>
<li><a href="#_mvc_architecture_with_rapidoid_s_built_in_template_engine">28.32. MVC architecture with Rapidoid&#8217;s built-in template engine</a></li>
<li><a href="#_custom_entitymanager_provider">28.33. Custom EntityManager provider</a></li>
<li><a href="#_custom_entitymanagerfactory_provider">28.34. Custom EntityManagerFactory provider</a></li>
<li><a href="#_custom_template_loader">28.35. Custom template loader</a></li>
<li><a href="#_create_key_value_data_grid_from_a_map">28.36. Create key-value data grid from a Map</a></li>
<li><a href="#_high_level_annotation_based_pojo_controllers">28.37. High-level annotation-based POJO controllers</a></li>
<li><a href="#_application_profiles">28.38. Application Profiles</a></li>
<li><a href="#_raw_html_pages">28.39. Raw HTML pages</a></li>
<li><a href="#_automatic_json_serialization_of_data_structures">28.40. Automatic JSON Serialization of Data Structures</a></li>
<li><a href="#_named_url_parameters">28.41. Named URL Parameters</a></li>
<li><a href="#_url_pattern_matching">28.42. URL pattern matching</a></li>
<li><a href="#_programmatic_setup_of_reverse_proxy_and_load_balancer">28.43. Programmatic setup of reverse proxy and load balancer</a></li>
<li><a href="#_custom_load_balancer">28.44. Custom load balancer</a></li>
<li><a href="#_reverse_proxy_matching_by_uri_prefix">28.45. Reverse proxy matching by URI prefix</a></li>
<li><a href="#_role_based_security">28.46. Role-based security</a></li>
<li><a href="#_display_bean_properties">28.47. Display bean properties</a></li>
<li><a href="#_serving_static_files_from_the_default_locations">28.48. Serving static files from the default locations</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<style>

code, kbd, pre, samp {
    font-size: 12px !important;
}

</style>
<div class="paragraph">
<p>This is the new documentation for <a href="http://www.rapidoid.org">Rapidoid</a> (v5.4).</p>
</div>
<div class="paragraph">
<p>For older versions of Rapidoid, please see <a href="http://www.rapidoid.org/docs-5.3.html">v5.3</a> and <a href="http://www.rapidoid.org/documentation.html">the old docs</a>.</p>
</div>
<div class="paragraph">
<p>Things to improve in the docs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the important concepts (architecture, design etc.) should be explained in more details,</p>
</li>
<li>
<p>the examples should be organized by categories,</p>
</li>
<li>
<p>information about the HTTP routes and sample requests/responses should be included for each example.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_is_rapidoid">1. What is Rapidoid?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Rapidoid is an extremely fast HTTP server and modern Java web framework / application container, with a strong focus on high productivity and high performance.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/rapidoid.png" alt="rapidoid">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_web_framework_or_dockerized_web_platform">2. Web Framework or Dockerized Web Platform?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The most of this documentation covers the aspects of using Rapidoid as a web framework with Java.</p>
</div>
<div class="paragraph">
<p>But Rapidoid can also be used as a web platform. For more details, please see the documentation of the <a href="https://store.docker.com/images/rapidoid">Official Docker repository for Rapidoid</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quick_start">3. Quick start</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For a quick start please use the <code>rapidoid-quick</code> module. It consists of <code>rapidoid-web</code> + batteries included:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Hibernate</p>
</li>
<li>
<p>Hibernate Validator</p>
</li>
<li>
<p>MySQL Connector</p>
</li>
<li>
<p>Logback</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_request_routing">4. Request routing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A web application can be defined as a collection of HTTP
request handlers. The HTTP requests are routed to the appropriate
lambda, based on the combination of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <strong>request verb</strong> (<code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code>, <code>PATCH</code>, <code>OPTIONS</code>, <code>HEAD</code>, <code>TRACE</code>)</p>
</li>
<li>
<p>and the <strong>request path</strong> (e.g. <code>/books/123</code>, <code>/users</code>).</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_matching_route">4.1. Matching route</h3>
<div class="paragraph">
<p>Rapidoid tries to find a matching handler for the route of the pending request.
If no handler matches the route, the first generic handler (if any) will be executed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_generic_handlers">4.2. Generic handlers</h3>
<div class="paragraph">
<p>The generic handlers are ordered in the order they were registered.
The generic handlers match any route, and they can be registered with <code>On.req()</code>.
If a generic handler returns <code>not found</code>, the next generic handler will be executed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_not_found">4.3. Not found</h3>
<div class="paragraph">
<p>If no handler manages to process the request, a <code>not found</code> HTTP response is returned.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_performance">5. Performance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The network communication of Rapidoid is fully asynchronous (e.g. epoll on Linux).
Several benchmarks have demonstrated stable high performance with 16K connections.</p>
</div>
<div class="paragraph">
<p>The number of <em>I/O threads</em> in Rapidoid equals the number of cores.
E.g. on a 8-core machine there would be 8 I/O threads.</p>
</div>
<div class="paragraph">
<p>The number of <em>job executor threads</em> can vary (e.g. 32, 128, 512, 1024 or more).</p>
</div>
<div class="sect2">
<h3 id="_managed_vs_unmanaged_request_handlers">5.1. Managed vs unmanaged request handlers</h3>
<div class="paragraph">
<p>The request processing can be done in a <em>managed</em> and <em>unmanaged</em> way:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>managed</strong> (the default): each request will be handled inside a job executed on the executor service (using <code>Jobs.*</code>).
This is the most convenient and powerful option, as it includes some built-in functionality:</p>
<div class="ulist">
<ul>
<li>
<p>request wrappers/interceptors</p>
</li>
<li>
<p>access control</p>
</li>
<li>
<p>transaction management</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>unmanaged</strong> - configured by <code>route.managed(false)</code>: every request is handled on the I/O thread that received it.
This is the fastest option and most flexible option, as it gives the developer complete control over the request handling.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The handlers that are executed in <em>unmanaged</em> way should execute quickly and in non-blocking way.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_asynchronous_handlers">5.2. Asynchronous handlers</h3>
<div class="paragraph">
<p>For asynchronous handlers, which continue to execute some logic outside the handler job, <code>Req#async()</code> and <code>Req#done()</code> should be used.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_profiles">6. Profiles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Application profiles are useful to conditionally activate application beans or configuration.</p>
</div>
<div class="sect2">
<h3 id="_the_default_profile">6.1. The default profile</h3>
<div class="paragraph">
<p>If no profiles are specified, the <code>default</code> profile will automatically be activated.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conditionally_activated_profiles">6.2. Conditionally activated profiles</h3>
<div class="paragraph">
<p>Depending on the configured or inferred environment mode (dev / test / production), one of the <code>dev</code>, <code>test</code> or <code>production</code> profiles will also be automatically activated (in addition to the default or configured profiles).</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_active_profiles">6.3. Configuring active profiles</h3>
<div class="paragraph">
<p>There are several ways to activate the application profiles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>command line argument:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>profiles=foo,bar</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>environment variable:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>PROFILES=foo,bar</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>programmatically:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>App.profiles("foo", "bar");</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Activating a <code>prod</code> or <code>production</code> profile automatically marks the environment mode as <code>production</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_built_in_profile_specific_configuration">6.4. Built-in profile-specific configuration</h3>
<div class="paragraph">
<p>Rapidoid has built-in default configuration for the profiles <code>default</code>, <code>dev</code> and <code>mysql</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_serving_static_files">7. Serving static files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It&#8217;s very easy to serve static files with Rapidoid.
Just add them as resources inside the <code>static</code> folder on the classpath in your Java project.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Most of the Java projects use Maven, so the static files should usually be placed in <code>src/main/resources/static</code>.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_built_in_static_resources">7.1. Built-in static resources</h3>
<div class="paragraph">
<p>Rapidoid includes some built-in static resources in a <code>default/static</code> folder on the classpath.</p>
</div>
<div class="paragraph">
<p>Thus, both <code>default/static</code> and <code>static</code> are default locations for serving static files.</p>
</div>
<div class="paragraph">
<p>The <code>static</code> location has precedense over the <code>default/static</code> location.</p>
</div>
</div>
<div class="sect2">
<h3 id="_automatically_serving_the_static_resources">7.2. Automatically serving the static resources</h3>
<div class="paragraph">
<p>Once a HTTP server is started, it will serve all the resources that exist in the <code>static</code> and <code>default/static</code> locations on the classpath.
They will be publicly available.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_restful_services">8. RESTful services</h2>
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>TODO: More details should be provided here.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Please see the examples.</p>
</div>
<div class="sect2">
<h3 id="_minimal_dependency">8.1. Minimal dependency</h3>
<div class="paragraph">
<p>The minimal dependency that is required to develop RESTful services is the <code>rapidoid-http-server</code> module.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_session_management">9. Session management</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <em>HTTP session</em> is a temporary data storage that spans multiple HTTP requests.
Data is stored in the session to be accessed later, when handling another HTTP request from the same user (and browsing session).</p>
</div>
<div class="paragraph">
<p>There are 2 different implementations of the session:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>server-side session a.k.a. <em>session</em></p>
</li>
<li>
<p>client-side token as a session a.k.a. <em>token</em></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_side_session_a_k_a_em_session_em">9.1. Server-side session a.k.a. <em>session</em></h3>
<div class="paragraph">
<p>The server-side session is a simple in-memory storage in the web server.</p>
</div>
<div class="sect3">
<h4 id="_non_trivial_scaling_out_with_server_side_session">Non-trivial scaling out with server-side session</h4>
<div class="paragraph">
<p>While there&#8217;s no problem when running an application on only one web server, scaling out is non-trivial.
It requires sticky sessions or replicating the session, or storing it into some datastore.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_client_side_token_as_a_session_a_k_a_em_token_em">9.2. Client-side token as a session a.k.a. <em>token</em></h3>
<div class="paragraph">
<p>The <strong>token is small, important data</strong> that is not stored on the server.</p>
</div>
<div class="sect3">
<h4 id="_super_easy_scaling_out_with_token_as_a_session">Super-easy scaling out with token as a session</h4>
<div class="paragraph">
<p>The main purpose of the token is keeping the servers stateless (a.k.a. shared-nothing architecture).
This approach allows easy scaling out of the application on multiple servers.</p>
</div>
</div>
<div class="sect3">
<h4 id="_inside_the_token">Inside the token</h4>
<div class="paragraph">
<p>The token has a Map-like structure, and it can store arbitrary data. By default, it stores:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>username of the logged-in user</p>
</li>
<li>
<p>token expiration time</p>
</li>
<li>
<p>scope of validity of the token</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_persisting_the_token">Persisting the token</h4>
<div class="paragraph">
<p>The token is being serialized and sent to the web browser as a cookie.
For the web browser this is just a cookie, so it sends the cookie to the server attached to the subsequent HTTP requests.</p>
</div>
</div>
<div class="sect3">
<h4 id="_token_limitations">Token limitations</h4>
<div class="paragraph">
<p>The main drawback of the token is the browser&#8217;s cookie size limits.
Each browser has different limit for the size of the cookies, but the safest limit to assume is <code>4 KB</code>.
That&#8217;s why the token should be used to store only small data.</p>
</div>
</div>
<div class="sect3">
<h4 id="_token_security">Token security</h4>
<div class="paragraph">
<p>The token is encrypted and HMAC-signed with the application&#8217;s secret key.
Thus, the user can’t read nor modify the token data in a malicious way (or any way).</p>
</div>
</div>
<div class="sect3">
<h4 id="_token_expiration">Token expiration</h4>
<div class="paragraph">
<p>After a configurable time (config <code>token.ttl</code> in milliseconds), the token expires.</p>
</div>
<div class="paragraph">
<p>The token cookie will also expire when the browser is closed.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_the_token">9.3. Configuring the token</h3>
<div class="paragraph">
<p>Please see the <code>token</code> configuration section.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dependency_injection">10. Dependency injection</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_annotations">10.1. Annotations</h3>
<div class="paragraph">
<p>Annotating a class with any of these annotations will mark the class as "managed" by Rapidoid for dependency injection:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.rapidoid.annotation.Controller</code></p>
</li>
<li>
<p><code>org.rapidoid.annotation.Service</code></p>
</li>
<li>
<p><code>javax.inject.Named</code></p>
</li>
<li>
<p><code>javax.inject.Singleton</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>@Controller</code> and <code>@Service</code> annotations serve for more specific description of the nature of the managed component (whether it is a web controller or business logic service).</p>
</div>
</div>
<div class="sect2">
<h3 id="_singleton_scope_only">10.2. Singleton scope only</h3>
<div class="paragraph">
<p>Rapidoid only supports the singleton scope.</p>
</div>
</div>
<div class="sect2">
<h3 id="_auto_run_main_entry_points">10.3. Auto-run main entry points</h3>
<div class="paragraph">
<p>The <code>org.rapidoid.annotation.Run</code> annotation marks a class with a <code>main</code> method that needs to be executed when bootstrapping an application:</p>
</div>
<div class="listingblock">
<div class="title">RunAnnotationDemo.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">RunAnnotationDemo</span> {
   <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
      App.bootstrap(args, <span class="string"><span class="delimiter">&quot;</span><span class="content">aa</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bb</span><span class="delimiter">&quot;</span></span>);
   }
}

<span class="annotation">@Run</span>
<span class="type">class</span> <span class="class">AppEntryPoint</span> {
   <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
      U.print(args);
   }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security">11. Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Role-based security checks for the web handlers are supported out-of-the-box.</p>
</div>
<div class="sect2">
<h3 id="_access_denied">11.1. Access denied</h3>
<div class="paragraph">
<p>Accessing a protected page without the required roles will automatically display a nice login page.</p>
</div>
<div class="paragraph">
<p>Accessing a protected RESTful service without the required roles will return error in JSON format.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_required_roles">11.2. Configuring required roles</h3>
<div class="paragraph">
<p>Required roles can be configured per route. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/review</span><span class="delimiter">&quot;</span></span>).roles(<span class="string"><span class="delimiter">&quot;</span><span class="content">moderator</span><span class="delimiter">&quot;</span></span>).json(...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required roles for POJO handlers can configured with annotations, e.g. <code>@Roles({"moderator", "administrator"})</code></p>
</div>
<div class="paragraph">
<p>Rapidoid also includes annotations for the common roles (<code>@Administrator</code>, <code>@Moderator</code>, <code>@Manager</code>, <code>@LoggedIn</code>):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>@Administrator</code> annotation is equivalent to <code>@Roles("administrator")</code> or <code>@Roles(Role.ADMINISTRATOR)</code></p>
</li>
<li>
<p>The <code>@Manager</code> annotation is equivalent to <code>@Roles("manager")</code> or <code>@Roles(Role.MANAGER)</code></p>
</li>
<li>
<p>The <code>@Moderator</code> annotation is equivalent to <code>@Roles("moderator")</code> or <code>@Roles(Role.MODERATOR)</code></p>
</li>
<li>
<p>The <code>@LoggedIn</code> annotation is equivalent to <code>@Roles("logged_in")</code> or <code>@Roles(Role.LOGGED_IN)</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authentication">12. Authentication</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_bootstrapping_the_authentication_services">12.1. Bootstrapping the authentication services</h3>
<div class="paragraph">
<p>Rapidoid provides built-in authentication services:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>POST /_login</code></p>
</li>
<li>
<p><code>GET /_logout</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can easily bootstrap these services:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>App.bootstrap(args).auth()</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
The built-in <code>GET /_logout</code> handler will be changed to <code>POST /_logout</code> in future.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_authentication_flow">12.2. Authentication flow</h3>
<div class="ulist">
<ul>
<li>
<p>A <code>POST /_login</code> request containing <code>username</code> and <code>password</code> will execute the (custom-configured or default) login handler.</p>
</li>
<li>
<p>If the login handler returns <code>true</code>, the user was authenticated and the <strong>authentication data</strong> (<code>username</code> and <code>login expiration time</code>) are saved in the <strong>token</strong>.</p>
</li>
<li>
<p>The token is returned by the <code>POST /_login</code> handler, but it is also persisted in the <code>_token</code> cookie.</p>
</li>
<li>
<p>With every request the authentication data is being sent through the token, so the server can identify the user.</p>
</li>
<li>
<p>When the browser is closed, the <code>_token</code> cookie expires, so the <code>auth data</code> is lost.</p>
</li>
<li>
<p>The <code>token</code> can be sent with a HTTP request as a <code>_token</code> cookie, or a <code>_token</code> parameter (in the URI or the body).</p>
</li>
<li>
<p>After a configurable time (config <code>token.ttl</code> in milliseconds), the authentication of the logged-in user expires.</p>
</li>
<li>
<p>A <code>GET /_logout</code> request will execute the built-in logout handler which clears the authentication data from the token.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_admin_api">12.3. The Admin API</h3>
<div class="paragraph">
<p>The <code>Admin.*</code> API is a mirror of the <code>On</code> API, but for the Admin setup.
The <code>administrator</code> role is configured by default for all routes of this API.</p>
</div>
</div>
<div class="sect2">
<h3 id="_custom_authentication_tokens">12.4. Custom authentication tokens</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httpcustomauth</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.http.Self</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.My</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.u.U</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.util.Tokens</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);

                My.rolesProvider((req, username) -&gt; username.equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">bob</span><span class="delimiter">&quot;</span></span>) ? U.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">manager</span><span class="delimiter">&quot;</span></span>) : U.set());

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/hey</span><span class="delimiter">&quot;</span></span>).roles(<span class="string"><span class="delimiter">&quot;</span><span class="content">manager</span><span class="delimiter">&quot;</span></span>).json(() -&gt; U.map(<span class="string"><span class="delimiter">&quot;</span><span class="content">msg</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">ok</span><span class="delimiter">&quot;</span></span>));

                <span class="comment">// generate a token</span>
                <span class="predefined-type">String</span> token = Tokens.serialize(U.map(<span class="string"><span class="delimiter">&quot;</span><span class="content">_user</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bob</span><span class="delimiter">&quot;</span></span>));

                <span class="comment">// demo request, prints {&quot;msg&quot;:&quot;ok&quot;}</span>
                Self.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/hey?_token=</span><span class="delimiter">&quot;</span></span> + token).print();
        }

}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">13. Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_built_in_configuration">13.1. The built-in configuration</h3>
<div class="paragraph">
<p>Rapidoid has built-in default configuration which provides sensible defaults for many components of the framework.</p>
</div>
<div class="listingblock">
<div class="title">built-in-config.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="key">on</span>:
  <span class="key">port</span>: <span class="string"><span class="content">8080</span></span>
  <span class="key">address</span>: <span class="string"><span class="content">0.0.0.0</span></span>

<span class="key">admin</span>:
  <span class="key">port</span>: <span class="string"><span class="content">${on.port}</span></span>
  <span class="key">address</span>: <span class="string"><span class="content">${on.address}</span></span>

<span class="key">app</span>:
  <span class="key">contextPath</span>: <span class="string"><span class="content">''</span></span>
  <span class="key">home</span>: <span class="string"><span class="content">/</span></span>

<span class="key">gui</span>:
  <span class="key">search</span>: <span class="string"><span class="content">false</span></span>
  <span class="key">navbar</span>: <span class="string"><span class="content">true</span></span>
  <span class="key">fluid</span>: <span class="string"><span class="content">false</span></span>
  <span class="key">cdn</span>: <span class="string"><span class="content">auto</span></span>
  <span class="key">menu</span>: <span class="string"><span class="content">{}</span></span>

<span class="key">main-zone</span>: <span class="string"><span class="content">{}</span></span>

<span class="key">users</span>:
  <span class="key">admin</span>:
    <span class="key">roles</span>: <span class="string"><span class="content">administrator</span></span>

<span class="key">jobs</span>:
  <span class="key">executor</span>:
    <span class="key">threads</span>: <span class="string"><span class="content">256</span></span>
  <span class="key">scheduler</span>:
    <span class="key">threads</span>: <span class="string"><span class="content">64</span></span>

<span class="key">jdbc</span>:
  <span class="key">host</span>: <span class="string"><span class="content">localhost</span></span>
  <span class="key">driver</span>: <span class="string"><span class="content">UNKNOWN</span></span>
  <span class="key">username</span>: <span class="string"><span class="content">UNKNOWN</span></span>
  <span class="key">password</span>: <span class="string"><span class="content">UNKNOWN</span></span>
  <span class="key">url</span>: <span class="string"><span class="content">UNKNOWN</span></span>
  <span class="key">options</span>: <span class="string"><span class="content">''</span></span>
  <span class="key">poolProvider</span>: <span class="string"><span class="content">hikari</span></span>

<span class="key">hibernate</span>:
  <span class="key">dialect</span>: <span class="string"><span class="content">UNKNOWN</span></span>

<span class="key">c3p0</span>:
  <span class="key">debug</span>: <span class="string"><span class="content">false</span></span>
  <span class="key">initialPoolSize</span>: <span class="string"><span class="content">5</span></span>
  <span class="key">minPoolSize</span>: <span class="string"><span class="content">5</span></span>
  <span class="key">maxPoolSize</span>: <span class="string"><span class="content">100</span></span>
  <span class="key">acquireIncrement</span>: <span class="string"><span class="content">5</span></span>
  <span class="key">maxStatementsPerConnection</span>: <span class="string"><span class="content">10</span></span>
  <span class="key">idleConnectionTestPeriod</span>: <span class="string"><span class="content">300</span></span>

<span class="key">hikari</span>: <span class="string"><span class="content">{}</span></span>

<span class="key">oauth</span>:
  <span class="key">google</span>:
    <span class="key">scope</span>: <span class="string"><span class="content">profile,email</span></span>
    <span class="key">clientId</span>: <span class="string"><span class="content">YOUR_GOOGLE_CLIENT_ID_HERE</span></span>
    <span class="key">clientSecret</span>: <span class="string"><span class="content">YOUR_GOOGLE_CLIENT_SECRET_HERE</span></span>

  <span class="key">github</span>:
    <span class="key">scope</span>: <span class="string"><span class="content">user:email</span></span>
    <span class="key">clientId</span>: <span class="string"><span class="content">YOUR_GITHUB_CLIENT_ID_HERE</span></span>
    <span class="key">clientSecret</span>: <span class="string"><span class="content">YOUR_GITHUB_CLIENT_SECRET_HERE</span></span>

  <span class="key">facebook</span>:
    <span class="key">scope</span>: <span class="string"><span class="content">public_profile,email</span></span>
    <span class="key">clientId</span>: <span class="string"><span class="content">YOUR_FACEBOOK_CLIENT_ID_HERE</span></span>
    <span class="key">clientSecret</span>: <span class="string"><span class="content">YOUR_FACEBOOK_CLIENT_SECRET_HERE</span></span>

  <span class="key">linkedin</span>:
    <span class="key">scope</span>: <span class="string"><span class="content">r_basicprofile,r_emailaddress</span></span>
    <span class="key">clientId</span>: <span class="string"><span class="content">YOUR_LINKEDIN_CLIENT_ID_HERE</span></span>
    <span class="key">clientSecret</span>: <span class="string"><span class="content">YOUR_LINKEDIN_CLIENT_SECRET_HERE</span></span>

<span class="key">net</span>:
  <span class="key">address</span>: <span class="string"><span class="content">0.0.0.0</span></span>
  <span class="key">port</span>: <span class="string"><span class="content">8080</span></span>
<span class="comment"># workers: ${system.cpus}</span>
  <span class="key">bufSizeKB</span>: <span class="string"><span class="content">256</span></span>
  <span class="key">noDelay</span>: <span class="string"><span class="content">false</span></span>
  <span class="key">maxPipeline</span>: <span class="string"><span class="content">0</span></span>
  <span class="key">syncBufs</span>: <span class="string"><span class="content">true</span></span>
  <span class="key">blockingAccept</span>: <span class="string"><span class="content">false</span></span>

<span class="key">http</span>:
  <span class="key">timeout</span>: <span class="string"><span class="content">30000</span></span>
  <span class="key">timeoutResolution</span>: <span class="string"><span class="content">5000</span></span>
  <span class="key">maxPipeline</span>: <span class="string"><span class="content">10</span></span>
  <span class="key">serverName</span>: <span class="string"><span class="content">Rapidoid</span></span>

  <span class="key">mandatoryHeaders</span>:
    <span class="key">connection</span>: <span class="string"><span class="content">true</span></span>
    <span class="key">date</span>: <span class="string"><span class="content">true</span></span>
    <span class="key">server</span>: <span class="string"><span class="content">true</span></span>
    <span class="key">contentType</span>: <span class="string"><span class="content">true</span></span>

<span class="key">reverse-proxy</span>:
  <span class="key">timeout</span>: <span class="string"><span class="content">10000</span></span>
  <span class="key">retryDelay</span>: <span class="string"><span class="content">300</span></span>
  <span class="key">maxConnections</span>: <span class="string"><span class="content">100</span></span>
  <span class="key">maxConnectionsPerRoute</span>: <span class="string"><span class="content">100</span></span>
  <span class="key">reuseConnections</span>: <span class="string"><span class="content">true</span></span>
  <span class="key">setHeaders</span>:
    <span class="key">X-Forwarded-For</span>: <span class="string"><span class="content">true</span></span>
    <span class="key">X-Client-IP</span>: <span class="string"><span class="content">false</span></span>
    <span class="key">X-Real-IP</span>: <span class="string"><span class="content">false</span></span>
    <span class="key">X-Username</span>: <span class="string"><span class="content">false</span></span>
    <span class="key">X-Roles</span>: <span class="string"><span class="content">false</span></span>

<span class="key">token</span>:
  <span class="key">ttl</span>: <span class="string"><span class="content">0</span></span> <span class="comment"># unlimited</span>

<span class="key">log</span>:
  <span class="key">level</span>: <span class="string"><span class="content">info</span></span>
<span class="comment"># fancy: auto</span>

<span class="key">tls</span>:
  <span class="key">selfSigned</span>: <span class="string"><span class="content">true</span></span>
  <span class="key">enabled</span>: <span class="string"><span class="content">false</span></span>
  <span class="key">keystore</span>: <span class="string"><span class="content">''</span></span>
  <span class="key">keystorePassword</span>: <span class="string"><span class="content">''</span></span>
  <span class="key">keyManagerPassword</span>: <span class="string"><span class="content">''</span></span>
  <span class="key">truststore</span>: <span class="string"><span class="content">''</span></span>
  <span class="key">truststorePassword</span>: <span class="string"><span class="content">''</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_custom_configuration">13.2. Custom configuration</h3>
<div class="paragraph">
<p>Custom configuration can be specified through <code>config.yml</code> (or <code>config.yaml</code>) configuration files.</p>
</div>
</div>
<div class="sect2">
<h3 id="_profiles_2">13.3. Profiles</h3>
<div class="paragraph">
<p>Custom, profile-specific configuration can be specified through <code>config-&lt;profile-name-here&gt;.yml</code> or <code>config-&lt;profile-name-here&gt;.yaml</code> configuration files.
Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>config-mysql.yml</code></p>
</li>
<li>
<p><code>config-dev.yaml</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_external_configuration_files">13.4. External configuration files</h3>
<div class="paragraph">
<p>The configuration files will tipically be classpath resources, but they can reside in a custom-configured external folder, as well.</p>
</div>
<div class="paragraph">
<p>Rapidoid can also be configured through command line args or system/environment properties.
The custom configuration overrides the built-in default configuration.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_multiple_servers_setup">14. Multiple servers setup</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_bootstrapping_multiple_servers">14.1. Bootstrapping multiple servers</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.multisetup</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.docs.multisetup.barsetup.BarSetupCtrl</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.docs.multisetup.foosetup.FooSetupCtrl</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.http.HTTP</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.Setup</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.run(args);

                Setup setup1 = Setup.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>).port(<span class="integer">2222</span>);
                Setup setup2 = Setup.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>).port(<span class="integer">3333</span>);

                setup1.scan(FooSetupCtrl.class.getPackage().getName());
                setup2.scan(BarSetupCtrl.class.getPackage().getName());

                <span class="comment">// demo</span>
                HTTP.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">localhost:2222/foo</span><span class="delimiter">&quot;</span></span>).print();
                HTTP.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">localhost:3333/bar</span><span class="delimiter">&quot;</span></span>).print();
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">barsetup/BarSetupCtrl.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.multisetup.barsetup</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.GET</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">BarSetupCtrl</span> {

        <span class="annotation">@GET</span>
        <span class="directive">public</span> <span class="predefined-type">String</span> bar() {
                <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, bar!</span><span class="delimiter">&quot;</span></span>;
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">foosetup/FooSetupCtrl.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.multisetup.foosetup</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.GET</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">FooSetupCtrl</span> {

        <span class="annotation">@GET</span>
        <span class="directive">public</span> <span class="predefined-type">String</span> foo() {
                <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, foo!</span><span class="delimiter">&quot;</span></span>;
        }

}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jdbc">15. JDBC</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_api">15.1. API</h3>
<div class="paragraph">
<p>Please take a look at the <code>JDBC</code> and <code>JdbcClient</code> classes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_connection_pools">15.2. Connection pools</h3>
<div class="paragraph">
<p>Rapidoid provides out-of-the-box support the <code>C3P0</code> and <code>Hikari</code> connection pools.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<code>Hikari</code> is now the default integrated connection pool for JDBC and JPA.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_providing_custom_datasource">15.3. Providing custom DataSource</h3>
<div class="paragraph">
<p>Please take a look at <code>JdbcClient#dataSource</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_paging">15.4. Paging</h3>
<div class="paragraph">
<p>Support for automatic paging through the results of JDBC queries will be available soon.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jpa">16. JPA</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Rapidoid provides generic JPA support. For a quick start it also includes Hibernate in the <code>rapidoid-quick</code> module.</p>
</div>
<div class="sect2">
<h3 id="_api_2">16.1. API</h3>
<div class="paragraph">
<p>Please take a look at the <code>JPA</code> class.</p>
</div>
</div>
<div class="sect2">
<h3 id="_bootstrap">16.2. Bootstrap</h3>
<div class="paragraph">
<p>Rapidoid can bootstrap Hibernate 4 (Hibernate 5 will eventually be supported):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">App.bootstrap(args).jpa();</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will scan the application package on the classpath, find the annotated JPA entities and register them with Hibernate.</p>
</div>
</div>
<div class="sect2">
<h3 id="_connection_pools_2">16.3. Connection pools</h3>
<div class="paragraph">
<p>Rapidoid provides out-of-the-box support the <code>C3P0</code> and <code>Hikari</code> connection pools.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<code>Hikari</code> is now the default integrated connection pool for JDBC and JPA.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_transactions">17. Transactions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Rapidoid also provides JPA transaction management, which is activated when a route is marked as transactional using <code>.transaction(&#8230;&#8203;)</code> or <code>@Transactional</code> handler method.</p>
</div>
<div class="paragraph">
<p>The transaction boundaries match the execution scope of the request handler, so every request is handled in a separate transaction.</p>
</div>
<div class="paragraph">
<p>For custom transaction scope and complete (programmatic) control over a transaction, you can call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>JPA.transaction(...)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_the_database">18. Configuring the database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Rapidoid features some built-in configuration for HSQL, MySQL and PostgreSQL.
You can use it by activating the desired application profile.</p>
</div>
<div class="paragraph">
<p>This built-in configuration also serves as a guide to configuring the database.</p>
</div>
<div class="sect2">
<h3 id="_embedded_hsql">18.1. Embedded HSQL</h3>
<div class="paragraph">
<p>Using the embedded HSQL database by default (the default profile):</p>
</div>
<div class="listingblock">
<div class="title">built-in-config-default.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="key">jdbc</span>:
  <span class="key">driver</span>: <span class="string"><span class="content">org.hsqldb.jdbc.JDBCDriver</span></span>
  <span class="key">url</span>: <span class="string"><span class="content">jdbc:hsqldb:mem:public</span></span>
  <span class="key">username</span>: <span class="string"><span class="content">sa</span></span>
  <span class="key">password</span>: <span class="string"><span class="content">''</span></span>

<span class="key">hibernate</span>:
  <span class="key">dialect</span>: <span class="string"><span class="content">org.hibernate.dialect.HSQLDialect</span></span>

<span class="key">center-zone</span>:
  <span class="key">home</span>: <span class="string"><span class="content">/_</span></span>
  <span class="key">brand</span>: <span class="string"><span class="content">'&lt;i class=&quot;fa fa-dashboard&quot;&gt;&lt;/i&gt; Admin Center'</span></span>
  <span class="key">search</span>: <span class="string"><span class="content">false</span></span>
  <span class="key">fluid</span>: <span class="string"><span class="content">true</span></span>
  <span class="key">menu</span>:
    <span class="key">Overview</span>: <span class="string"><span class="content">/_</span></span>
    <span class="key">Routes</span>: <span class="string"><span class="content">/_routes</span></span>
    <span class="key">Configuration</span>: <span class="string"><span class="content">/_config</span></span>
    <span class="key">Processes</span>: <span class="string"><span class="content">/_processes</span></span>
    <span class="key">Metrics</span>: <span class="string"><span class="content">/_metrics</span></span>
    <span class="key">Manageables</span>: <span class="string"><span class="content">/_manageables</span></span>
    <span class="key">Application</span>:
      <span class="key">Beans</span>: <span class="string"><span class="content">/_beans</span></span>
      <span class="key">Entities</span>: <span class="string"><span class="content">/_entities</span></span>
    <span class="key">System</span>:
      <span class="key">Terminate / Restart</span>: <span class="string"><span class="content">/_terminate</span></span>
      <span class="key">Classpath</span>: <span class="string"><span class="content">/_classpath</span></span>
      <span class="key">Memory pool</span>: <span class="string"><span class="content">/_jmx/mempool</span></span>
      <span class="key">JVM Threads</span>: <span class="string"><span class="content">/_jmx/threads</span></span>
      <span class="key">Operating system</span>: <span class="string"><span class="content">/_jmx/os</span></span>
      <span class="key">Garbage collection</span>: <span class="string"><span class="content">/_jmx/gc</span></span>
      <span class="key">Memory</span>: <span class="string"><span class="content">/_jmx/memory</span></span>
      <span class="key">Runtime</span>: <span class="string"><span class="content">/_jmx/runtime</span></span>
      <span class="key">Classes</span>: <span class="string"><span class="content">/_jmx/classes</span></span>
      <span class="key">Compilation</span>: <span class="string"><span class="content">/_jmx/compilation</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mysql">18.2. MySQL</h3>
<div class="paragraph">
<p>Using MySQL with the <code>mysql</code> profile:</p>
</div>
<div class="listingblock">
<div class="title">built-in-config-mysql.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="key">jdbc</span>:
  <span class="key">driver</span>: <span class="string"><span class="content">com.mysql.jdbc.Driver</span></span>
  <span class="key">url</span>: <span class="string"><span class="content">jdbc:mysql://${jdbc.host}:${jdbc.port}?${jdbc.options}</span></span>
  <span class="key">username</span>: <span class="string"><span class="content">root</span></span>
  <span class="key">password</span>: <span class="string"><span class="content">root</span></span>
  <span class="key">port</span>: <span class="string"><span class="content">3306</span></span>
  <span class="key">options</span>: <span class="string"><span class="content">logger=Slf4JLogger</span></span>

<span class="key">hibernate</span>:
  <span class="key">dialect</span>: <span class="string"><span class="content">org.hibernate.dialect.MySQL5Dialect</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_postgresql">18.3. PostgreSQL</h3>
<div class="paragraph">
<p>Using PostgreSQL with the <code>postgres</code> profile:</p>
</div>
<div class="listingblock">
<div class="title">built-in-config-postgres.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="key">jdbc</span>:
  <span class="key">driver</span>: <span class="string"><span class="content">org.postgresql.Driver</span></span>
  <span class="key">url</span>: <span class="string"><span class="content">jdbc:postgresql://${jdbc.host}:${jdbc.port}/?${jdbc.options}</span></span>
  <span class="key">username</span>: <span class="string"><span class="content">postgres</span></span>
  <span class="key">password</span>: <span class="string"><span class="content">postgres</span></span>
  <span class="key">port</span>: <span class="string"><span class="content">5432</span></span>
  <span class="key">options</span>: <span class="string"><span class="content">loglevel=1</span></span>

<span class="key">hibernate</span>:
  <span class="key">dialect</span>: <span class="string"><span class="content">org.hibernate.dialect.PostgreSQL9Dialect</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rapidoid_s_template_engine">19. Rapidoid&#8217;s template engine</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Starting from v5.1, Rapidoid has its own template engine. Basically, it is very similar to Mustache, with the following differences:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using <code>${x}</code> instead of <code>{{x}}</code>. This syntax is very common in the Java world, and it also avoids collision of the <code>{{x}}</code> tags with the front-end libraries (e.g. Angular).</p>
</li>
<li>
<p>Supporting additional <code>{{?x}}&#8230;&#8203;{{/}}</code> tag for <code>if</code>. The traditional <code>{{#x}}&#8230;&#8203;{{/x}}</code> remains unchanged, having both <code>foreach</code> and <code>if</code> semantics.</p>
</li>
<li>
<p>Providing text alternative if the value if not available e.g. <code>${x|something else}</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reverse_proxy_and_load_balancer">20. Reverse proxy and load balancer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Starting from v5.2, Rapidoid can be also used as a HTTP reverse proxy and load balancer.
A basic round-robin load balancer is included and configured as a default one.</p>
</div>
<div class="paragraph">
<p>The reverse proxy can be configured programatically (optionally with custom load balancers).</p>
</div>
<div class="paragraph">
<p>The reverse proxy can also be configured from the command-line args.
The command-line argument syntax is: <code>/path &#8594; upstream1,upstream2&#8230;&#8203;</code>. Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/ &#8594; <a href="https://localhost:8080" class="bare">https://localhost:8080</a></code></p>
</li>
<li>
<p><code>/foo &#8594; <a href="https://upstream1:8080" class="bare">https://upstream1:8080</a>, <a href="http://upstream2:8080" class="bare">http://upstream2:8080</a></code></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_configuring">20.1. Configuring</h3>
<div class="paragraph">
<p>Please see the <code>reverse-proxy</code> configuration section.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_https_tls">21. HTTPS &amp; TLS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It&#8217;s easy to enable serving over <code>HTTPS</code> (or TLS for any protocol, in general) with Rapidoid.
The server will listen on the same port, but instead of <code>HTTP</code> it will serve <code>HTTPS</code>.</p>
</div>
<div class="sect2">
<h3 id="_self_signed_certificates">21.1. Self-signed certificates</h3>
<div class="paragraph">
<p>If configured, Rapidoid will create (untrusted) self-signed certificates, which might be useful for quick demo/testing purposes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_https_tls">21.2. Configuring HTTPS (TLS)</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.https</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/hello</span><span class="delimiter">&quot;</span></span>).plain(<span class="string"><span class="delimiter">&quot;</span><span class="content">hello!</span><span class="delimiter">&quot;</span></span>);
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">config.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="key">tls</span>:
  <span class="key">enabled</span>: <span class="string"><span class="content">false</span></span>
  <span class="key">selfSigned</span>: <span class="string"><span class="content">true</span></span> <span class="comment"># shouldn't be used in production</span>
  <span class="key">keystore</span>: <span class="string"><span class="content">'/ssl/test-keystore'</span></span>
  <span class="key">keystorePassword</span>: <span class="string"><span class="content">'my-password'</span></span>
  <span class="key">keyManagerPassword</span>: <span class="string"><span class="content">'my-password'</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_http_chunked_response">22. HTTP Chunked response</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_sending_chunked_http_response">22.1. Sending chunked HTTP response</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httpchunked</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.job.Jobs</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.run(args);

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/hello</span><span class="delimiter">&quot;</span></span>).plain((req, resp) -&gt; {

                        req.async(); <span class="comment">// mark asynchronous request processing</span>

                        <span class="comment">// send part 1</span>
                        resp.chunk(<span class="string"><span class="delimiter">&quot;</span><span class="content">part 1</span><span class="delimiter">&quot;</span></span>.getBytes());

                        <span class="comment">// after some time, send part 2 and finish</span>
                        Jobs.after(<span class="integer">100</span>).milliseconds(() -&gt; {
                                resp.chunk(<span class="string"><span class="delimiter">&quot;</span><span class="content"> &amp; part 2</span><span class="delimiter">&quot;</span></span>.getBytes());
                                resp.done();
                        });

                        <span class="keyword">return</span> resp;
                });
        }

}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_customization">23. Customization</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Many components of Rapidoid can be customized / replaced.
Please see the <code>My</code> and <code>Customization</code> classes.</p>
</div>
<div class="sect2">
<h3 id="_customizable_components">23.1. Customizable components</h3>
<div class="paragraph">
<p>Here is a list of the customization fields in the <code>Customization</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">String</span><span class="type">[]</span> staticFilesPath;

ErrorHandler errorHandler;

ViewResolver viewResolver;

PageDecorator pageDecorator;

JsonResponseRenderer jsonResponseRenderer;

JsonRequestBodyParser jsonRequestBodyParser;

BeanParameterFactory beanParameterFactory;

LoginProvider loginProvider;

RolesProvider rolesProvider;

BeanValidator validator;

ObjectMapper jackson;

EntityManagerProvider entityManagerProvider;

EntityManagerFactoryProvider entityManagerFactoryProvider;

SessionManager sessionManager;

StaticFilesSecurity staticFilesSecurity;

HttpWrapper<span class="type">[]</span> wrappers;

ResourceLoader templateLoader;</code></pre>
</div>
</div>
<div class="paragraph">
<p>E.g. All of them can be customized using <code>My.*</code> API:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>My.staticFilesPath(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>My.errorHandler(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>My.viewResolver(&#8230;&#8203;)</code></p>
</li>
<li>
<p>etc.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please see the examples.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_logging">24. Logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please see the <code>Log</code> class.</p>
</div>
<div class="sect2">
<h3 id="_configuring_2">24.1. Configuring</h3>
<div class="paragraph">
<p>Please see the <code>log</code> configuration section.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_command_line_arguments">25. Basic command-line arguments</h2>
<div class="sectionbody">
<div class="row">
  <div class="col-md-12">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Name</th>
          <th>Desc</th>
          <th>Default value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>config</td>
          <td>configuration filename prefix</td>
          <td>config</td>
        </tr>
        <tr>
          <td>dev</td>
          <td>run in DEV mode</td>
          <td>auto-detected</td>
        </tr>
        <tr>
          <td>production</td>
          <td>run in PRODUCTION mode</td>
          <td>auto-detected</td>
        </tr>
        <tr>
          <td>test</td>
          <td>run in TEST mode</td>
          <td>auto-detected</td>
        </tr>
        <tr>
          <td>secret=&lt;SECRET&gt;</td>
          <td>configure secret key for cryptography</td>
          <td>random</td>
        </tr>
        <tr>
          <td>profiles=&lt;P1,P2...&gt;</td>
          <td>comma-separated list of application profiles (e.g. mysql,prod)</td>
          <td>the 'default' profile</td>
        </tr>
        <tr>
          <td>on.port=&lt;P&gt;</td>
          <td>the default App server will listen at port P</td>
          <td>8888</td>
        </tr>
        <tr>
          <td>on.address=&lt;ADDR&gt;</td>
          <td>the default App server will listen at address ADDR</td>
          <td>0.0.0.0</td>
        </tr>
        <tr>
          <td>admin.port=&lt;P&gt;</td>
          <td>the Admin server will listen at port P</td>
          <td>same as on.port</td>
        </tr>
        <tr>
          <td>admin.address=&lt;ADDR&gt;</td>
          <td>the Admin server will listen at address ADDR</td>
          <td>on.address</td>
        </tr>
        <tr>
          <td>app.services=&lt;S1,S2...&gt;</td>
          <td>comma-separated list of services to bootstrap on the App server</td>
          <td>none</td>
        </tr>
        <tr>
          <td>admin.services=&lt;S1,S2...&gt;</td>
          <td>comma-separated list of services to bootstrap on the Admin server</td>
          <td>none</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rapidoid_modules">26. Rapidoid Modules</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_rapidoid_gui_module">26.1. Rapidoid GUI module</h3>
<div class="ulist">
<ul>
<li>
<p>Consists of Web GUI components that generate HTML (grids, forms and other widgets)</p>
</li>
<li>
<p>Most of the GUI components are based on the Twitter Bootstrap framework</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_rapidoid_fluent_module">26.2. Rapidoid Fluent module</h3>
<div class="ulist">
<ul>
<li>
<p>Lightweight fluent DSL for elegant manipulation of collections and streams</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_rapidoid_essentials_module">26.3. Rapidoid Essentials module</h3>
<div class="ulist">
<ul>
<li>
<p>The must-have utilities for every Java project!</p>
</li>
<li>
<p>Simple and straight to the point!</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_rapidoid_web_module">26.4. Rapidoid Web module</h3>
<div class="ulist">
<ul>
<li>
<p>The high-level API is built on top of Rapidoid HTTP server, provides many advanced features for building modern POJO-based web applications</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_http_api">27. The HTTP API</h2>
<div class="sectionbody">
<div class="col-md-12">
  <h4>
    <b>The HTTP Request and Response API (in interface Req):</b>
  </h4>
  <div class="api-docs">
    <table class="table table-striped table-hover">
      <tr>
        <td><h5>
  <b>HTTP REQUEST DATA</b>
</h5></td>
        <td></td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> verb()</pre></td>
        <td>Gets the <b>verb</b> of the HTTP request.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> uri()</pre></td>
        <td>Gets the <b>uri</b> of the HTTP request.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> path()</pre></td>
        <td>Gets the <b>path</b> of the HTTP request.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> query()</pre></td>
        <td>Gets the <b>query</b> of the HTTP request.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">byte</span>[] body()</pre></td>
        <td>Gets the <b>raw body data</b> of the HTTP request.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> host()</pre></td>
        <td>Gets the value of the <b>Host header</b> of the HTTP request.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> zone()</pre></td>
        <td>Gets the name of the <b>application zone</b> handling the request. <br>
 The default zone name is <code>main</code> for the <code>On</code> API, and <code>admin</code> for the <code>Admin</code> API.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> contextPath()</pre></td>
        <td>Gets the <b>context path</b> of the application zone handling the request. <br>
 The default context path is <code>/</code> for the <code>On</code> API, and <code>/_</code> for the <code>Admin</code> API.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> clientIpAddress()</pre></td>
        <td>Gets the <b>IP address</b> of the HTTP client directly sending the request.<br>
 This can be the address of a real user, or a HTTP proxy (if the user uses such), or a reverse proxy (if the application/server uses such).</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> realIpAddress()</pre></td>
        <td>A best-effort attempt to infer the real <b>IP address</b> of the end user/client/client proxy.<br>
 If a reverse proxy is detected with high confidence (or configured), its headers will be used to get the real IP address of the user.<br>
 Otherwise, the value of <code>Req#clientIpAddress()</code> is returned.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">long</span> connectionId()</pre></td>
        <td>Gets the <b>HTTP connection ID</b>, which is unique per HTTP server instance.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">long</span> requestId()</pre></td>
        <td>Gets the <b>HTTP request ID</b>, which is unique per HTTP server instance.</td>
      </tr>
      <tr>
        <td><h5>
  <b>URL PARAMETERS:</b>
</h5></td>
        <td></td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Map</span>&lt;<span class="_code_cls">String</span>, <span class="_code_cls">String</span>&gt; params()</pre></td>
        <td>Gets the <b>URL parameters</b> of the HTTP request.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> param(<span class="_code_cls">String</span> name)</pre></td>
        <td>Returns the value of the specified <b>mandatory URL parameter</b> from the HTTP request, or throws a runtime
 exception if it is not found.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> param(<span class="_code_cls">String</span> name, <span class="_code_cls">String</span> defaultValue)</pre></td>
        <td>Returns the value of the specified <b>optional URL parameter</b> from the HTTP request, or the specified default
 value, if not found.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet">T param(<span class="_code_cls">Class</span>&lt;T&gt; beanType)</pre></td>
        <td>Returns a new instance of the specified bean type, with properties initialized from the <b>URL parameters</b> of the HTTP request.</td>
      </tr>
      <tr>
        <td><h5>
  <b>POSTED PARAMETERS IN THE REQUEST BODY:</b>
</h5></td>
        <td></td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Map</span>&lt;<span class="_code_cls">String</span>, <span class="_code_cls">Object</span>&gt; posted()</pre></td>
        <td>Gets the <b>posted parameters</b> of the HTTP request body.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet">T posted(<span class="_code_cls">String</span> name)</pre></td>
        <td>Returns the value of the specified <b>posted parameter</b> from the HTTP request body, or throws a runtime
 exception if it is not found.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet">T posted(<span class="_code_cls">String</span> name, T defaultValue)</pre></td>
        <td>Returns the value of the specified <b>posted parameter</b> from the HTTP request body, or the specified default
 value, if it is not found.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet">T posted(<span class="_code_cls">Class</span>&lt;T&gt; beanType)</pre></td>
        <td>Returns a new instance of the specified bean type, with properties initialized from the <b>posted parameters</b> of the HTTP request.</td>
      </tr>
      <tr>
        <td><h5>
  <b>UPLOADED FILES IN THE REQUEST BODY:</b>
</h5></td>
        <td></td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Map</span>&lt;<span class="_code_cls">String</span>, <span class="_code_cls">List</span>&lt;<span class="_code_cls">Upload</span>&gt;&gt; files()</pre></td>
        <td>Gets the <b>uploaded files</b> from the HTTP request body.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">List</span>&lt;<span class="_code_cls">Upload</span>&gt; files(<span class="_code_cls">String</span> name)</pre></td>
        <td>Returns the <b>uploaded files</b> with the specified form parameter name (not filename) from the HTTP request body,
 or throws a runtime exception if not found.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Upload</span> file(<span class="_code_cls">String</span> name)</pre></td>
        <td>Returns exactly one <b>posted file</b> with the specified form parameter name (not filename) from the HTTP request body,
 or throws a runtime exception if not found.</td>
      </tr>
      <tr>
        <td><h5>
  <b>REQUEST DATA PARAMETERS (URL PARAMETERS + POSTED PARAMETERS + UPLOADED FILES):</b>
</h5></td>
        <td></td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Map</span>&lt;<span class="_code_cls">String</span>, <span class="_code_cls">Object</span>&gt; data()</pre></td>
        <td>Gets the <b>data parameters (URL parameters + posted parameters + uploaded files)</b> of the HTTP request.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet">T data(<span class="_code_cls">String</span> name)</pre></td>
        <td>Returns the value of the specified <b>data parameter</b> from the HTTP request, or throws a runtime exception if
 it is not found.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet">T data(<span class="_code_cls">String</span> name, T defaultValue)</pre></td>
        <td>Returns the value of the specified <b>data parameter</b> from the HTTP request, or the specified default value,
 if it is not found.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet">T data(<span class="_code_cls">Class</span>&lt;T&gt; beanType)</pre></td>
        <td>Returns a new instance of the specified bean type, with properties initialized from the <b>data parameters</b> of the HTTP request.</td>
      </tr>
      <tr>
        <td><h5>
  <b>EXTRA ATTRIBUTES ATTACHED TO THE REQUEST:</b>
</h5></td>
        <td></td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Map</span>&lt;<span class="_code_cls">String</span>, <span class="_code_cls">Object</span>&gt; attrs()</pre></td>
        <td>Gets the <b>extra attributes</b> of the HTTP request.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet">T attr(<span class="_code_cls">String</span> name)</pre></td>
        <td>Returns the value of an <b>extra attribute</b> from the HTTP request, or throws a runtime exception if it is not
 found.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet">T attr(<span class="_code_cls">String</span> name, T defaultValue)</pre></td>
        <td>Returns the value of the specified <b>extra attribute</b> from the HTTP request, or the specified default value,
 if it is not found.</td>
      </tr>
      <tr>
        <td><h5>
  <b>SERVER-SIDE SESSION:</b>
</h5></td>
        <td></td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> sessionId()</pre></td>
        <td>Returns the ID of the session (the value of the <b>"JSESSIONID" cookie</b>). If a session doesn't exist, a new
 session is created.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">boolean</span> hasSession()</pre></td>
        <td>Does the HTTP request have a server-side session attached?</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Map</span>&lt;<span class="_code_cls">String</span>, <span class="_code_cls">Serializable</span>&gt; session()</pre></td>
        <td>Provides <b>read/write access</b> to the <b>server-side session attributes</b> of the HTTP request/response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet">T session(<span class="_code_cls">String</span> name)</pre></td>
        <td>Returns the value of the specified <b>server-side session attribute</b> from the HTTP request/response, or throws a
 runtime exception if it is not found.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet">T session(<span class="_code_cls">String</span> name, T defaultValue)</pre></td>
        <td>Returns the value of the specified <b>server-side session attribute</b> from the HTTP request/response, or the specified
 default value, if it is not found.</td>
      </tr>
      <tr>
        <td><h5>
  <b>TOKEN DATA:</b>
</h5></td>
        <td></td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">boolean</span> hasToken()</pre></td>
        <td>Does the HTTP request have a token attached?</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Map</span>&lt;<span class="_code_cls">String</span>, <span class="_code_cls">Serializable</span>&gt; token()</pre></td>
        <td>Provides <b>read/write access</b> to the <b>token attributes</b> of the HTTP request/response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet">T token(<span class="_code_cls">String</span> name)</pre></td>
        <td>Returns the value of the specified <b>token attribute</b> from the HTTP request/response, or throws a
 runtime exception if it is not found.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet">T token(<span class="_code_cls">String</span> name, T defaultValue)</pre></td>
        <td>Returns the value of the specified <b>token attribute</b> from the HTTP request/response, or the
 specified default value, if it is not found.</td>
      </tr>
      <tr>
        <td><h5>
  <b>REQUEST HEADERS:</b>
</h5></td>
        <td></td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Map</span>&lt;<span class="_code_cls">String</span>, <span class="_code_cls">String</span>&gt; headers()</pre></td>
        <td>Gets the <b>headers</b> of the HTTP request.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> header(<span class="_code_cls">String</span> name)</pre></td>
        <td>Returns the value of the specified <b>header</b> from the HTTP request, or throws a runtime exception if it is
 not found.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> header(<span class="_code_cls">String</span> name, <span class="_code_cls">String</span> defaultValue)</pre></td>
        <td>Returns the value of the specified <b>header</b> from the HTTP request, or the specified default value, if it is
 not found.</td>
      </tr>
      <tr>
        <td><h5>
  <b>REQUEST COOKIES:</b>
</h5></td>
        <td></td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Map</span>&lt;<span class="_code_cls">String</span>, <span class="_code_cls">String</span>&gt; cookies()</pre></td>
        <td>Gets the <b>cookies</b> of the HTTP request.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> cookie(<span class="_code_cls">String</span> name)</pre></td>
        <td>Returns the value of the specified <b>cookie</b> from the HTTP request, or throws a runtime exception if it is
 not found.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> cookie(<span class="_code_cls">String</span> name, <span class="_code_cls">String</span> defaultValue)</pre></td>
        <td>Returns the value of the specified <b>cookie</b> from the HTTP request, or the specified default value, if it is
 not found.</td>
      </tr>
      <tr>
        <td><h5>
  <b>RESPONSE:</b>
</h5></td>
        <td></td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> response()</pre></td>
        <td>Gets the reference to the <b>response object</b>.</td>
      </tr>
      <tr>
        <td><h5>
  <b>ASYNCHRONOUS REQUEST HANDLING:</b>
</h5></td>
        <td></td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Req</span> async()</pre></td>
        <td>Informs the HTTP server that the request will be handled asynchronously (typically on another thread). When the
 response is complete, <b>the <code>Req#done()</code> or <code>Resp#done()</code> method must be called</b>, to
 inform the server.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">boolean</span> isAsync()</pre></td>
        <td>Is/was the request being handled in asynchronous mode?</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Req</span> done()</pre></td>
        <td>Informs the HTTP server that the asynchronous handling has finished and the response is complete.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">boolean</span> isDone()</pre></td>
        <td>Has the request handling and response construction finished?</td>
      </tr>
      <tr>
        <td><h5>
  <b>WEB APPLICATION SETUP:</b>
</h5></td>
        <td></td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">HttpRoutes</span> routes()</pre></td>
        <td>Provides access to the <b>HTTP routes</b> of the web application setup.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Route</span> route()</pre></td>
        <td>Provides access to the <b>matching HTTP route (if any)</b> of the web application setup.<br>
 In case a generic handler handles the request, or no matching route was found, <code>null</code> is returned.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Customization</span> custom()</pre></td>
        <td>Provides access to the <b>customization</b> of the web application setup.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">void</span> revert()</pre></td>
        <td>Reverts the previous processing of the request, usually with intention to process the same request again.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">OutputStream</span> out()</pre></td>
        <td>First renders the response headers, then returns an <i>OutputStream</i> representing
 the <b>response body</b>. The response body will be constructed by writing to the <i>OutputStream</i>.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">MediaType</span> contentType()</pre></td>
        <td>Gets the <b><code>Content-Type</code> header</b> of the HTTP response if it has been assigned,
 or the default value as configured in the HTTP route.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">long</span> handle()</pre></td>
        <td>Returns the request handle, which is used when resuming the request handling in asynchronous way.<br>
 See <code>Resp#resume</code>.</td>
      </tr>
    </table>
  </div>
  <h4>
    <b>The HTTP Request and Response API (in interface Resp):</b>
  </h4>
  <div class="api-docs">
    <table class="table table-striped table-hover">
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> result(<span class="_code_cls">Object</span> content)</pre></td>
        <td>Sets the <b>content</b> to be serialized into a body when the HTTP response is rendered.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Object</span> result()</pre></td>
        <td>Gets the <b>content</b> to be serialized into a body when the HTTP response is rendered.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> body(<span class="_code_cls">byte</span>[] body)</pre></td>
        <td>Sets the <b>HTTP response body</b> from a <b><code>byte[]</code></b> data that is written as a HTTP response body when rendered.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> body(<span class="_code_cls">ByteBuffer</span> body)</pre></td>
        <td>Sets the <b>HTTP response body</b> from a <b><code>ByteBuffer</code></b> data that is written as a HTTP response body when rendered.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Object</span> body()</pre></td>
        <td>Gets the <b>HTTP response body</b> data (of type byte[] or ByteBuffer) that is written as a HTTP response body when rendered.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> raw(<span class="_code_cls">byte</span>[] raw)</pre></td>
        <td>Sets the <b>raw HTTP response (headers and body)</b> from a <b><code>byte[]</code></b> data that is written as a HTTP response when rendered.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> raw(<span class="_code_cls">ByteBuffer</span> raw)</pre></td>
        <td>Sets the <b>raw HTTP response (headers and body)</b> from a <b><code>ByteBuffer</code></b> data that is written as a HTTP response when rendered.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Object</span> raw()</pre></td>
        <td>Gets the <b>raw HTTP response (headers and body)</b> data (of type byte[] or ByteBuffer) that is written as a HTTP response when rendered.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> code(<span class="_code_cls">int</span> code)</pre></td>
        <td>Sets the <b>status code</b> <i>(e.g. 200, 404, 500)</i> of the HTTP response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">int</span> code()</pre></td>
        <td>Gets the <b>status code</b> <i>(e.g. 200, 404, 500)</i> of the HTTP response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> contentType(<span class="_code_cls">MediaType</span> contentType)</pre></td>
        <td>Sets the <b><code>Content-Type</code> header</b> to be rendered in the HTTP response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">MediaType</span> contentType()</pre></td>
        <td>Gets the <b><code>Content-Type</code> header</b> to be rendered in the HTTP response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> redirect(<span class="_code_cls">String</span> redirectURI)</pre></td>
        <td>Sets the <b>redirect URI</b> of the HTTP response. <br>
 Setting this will cause a <b>HTTP 30x redirect</b> response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> redirect()</pre></td>
        <td>Gets the <b>redirect URI</b> of the HTTP response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> filename(<span class="_code_cls">String</span> filename)</pre></td>
        <td>Sets the <b>filename</b> when serving a file in the HTTP response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> filename()</pre></td>
        <td>Gets the <b>filename</b> when serving a file in the HTTP response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> view(<span class="_code_cls">String</span> viewName)</pre></td>
        <td>Sets a custom name of the <b>view</b> (V from MVC) of the HTTP response. <br>
 This also sets <b>mvc</b> to <code>true</code>. <br>
 The default view name equals <b>the request path without the "/" prefix</b>, except for the "/" path, where the view name is "index". <br>
 E.g. "/abc" -> "abc", "/" -> "index", "/my/books" -> "my/books".</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">String</span> view()</pre></td>
        <td>Gets the (default or customized) name of the <b>view</b> (V from MVC) of the HTTP response. <br>
 The default view name equals <b>the request path without the "/" prefix</b>, except for the "/" path, where the view name is "index". <br>
 E.g. "/abc" -> "abc", "/" -> "index", "/my/books" -> "my/books".</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> noView()</pre></td>
        <td>Disables the view rendering for the target MVC route. The page decorator remains enabled.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> file(<span class="_code_cls">File</span> file)</pre></td>
        <td>Sets the <b>file</b> to be served when the HTTP response is rendered.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">File</span> file()</pre></td>
        <td>Gets the <b>file</b> to be served when the HTTP response is rendered.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Map</span>&lt;<span class="_code_cls">String</span>, <span class="_code_cls">String</span>&gt; headers()</pre></td>
        <td>Provides <b>read/write access</b> to the <b>headers</b> of the HTTP response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> header(<span class="_code_cls">String</span> name, <span class="_code_cls">String</span> value)</pre></td>
        <td>Sets a <b>header</b> of the HTTP response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Map</span>&lt;<span class="_code_cls">String</span>, <span class="_code_cls">String</span>&gt; cookies()</pre></td>
        <td>Provides <b>read/write access</b> to the <b>cookies</b> of the HTTP response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> cookie(<span class="_code_cls">String</span> name, <span class="_code_cls">String</span> value, <span class="_code_cls">String</span>... extras)</pre></td>
        <td>Sets a <b>cookie</b> of the HTTP response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Map</span>&lt;<span class="_code_cls">String</span>, <span class="_code_cls">Serializable</span>&gt; session()</pre></td>
        <td>Provides <b>read/write access</b> to the <b>server-side session attributes</b> of the HTTP request/response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> session(<span class="_code_cls">String</span> name, <span class="_code_cls">Serializable</span> value)</pre></td>
        <td>Sets a <b>session attribute</b> of the HTTP response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Map</span>&lt;<span class="_code_cls">String</span>, <span class="_code_cls">Serializable</span>&gt; token()</pre></td>
        <td>Provides <b>read/write access</b> to the <b>token attributes</b> of the HTTP request/response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> token(<span class="_code_cls">String</span> name, <span class="_code_cls">Serializable</span> value)</pre></td>
        <td>Sets a <b>token attribute</b> of the HTTP response.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Map</span>&lt;<span class="_code_cls">String</span>, <span class="_code_cls">Object</span>&gt; model()</pre></td>
        <td>Provides <b>read/write access</b> to the <b>model</b> (M from MVC) that will be rendered by the view renderer.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> model(<span class="_code_cls">String</span> name, <span class="_code_cls">Object</span> value)</pre></td>
        <td>Sets an attribute of the <b>model</b> (M from MVC) that will be rendered by the view renderer.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> done()</pre></td>
        <td>Informs the HTTP server that the asynchronous handling has finished and the response is complete.<br>
 <i>Alias</i> to <code>request().done()</code>.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> plain(<span class="_code_cls">Object</span> content)</pre></td>
        <td>Sets the <b><code>Content-Type: text/plain; charset=utf-8</code> header and the content</b> of the HTTP response. <br>
 <i>Alias</i> to <code>contentType(MediaType.PLAIN_TEXT_UTF_8).body(content)</code>.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> html(<span class="_code_cls">Object</span> content)</pre></td>
        <td>Sets the <b><code>Content-Type: text/html; charset=utf-8</code> header and the content</b> of the HTTP response. <br>
 <i>Alias</i> to <code>contentType(MediaType.HTML_UTF_8).body(content)</code>.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> json(<span class="_code_cls">Object</span> content)</pre></td>
        <td>Sets the <b><code>Content-Type: application/json</code> header and the content</b> of the HTTP response. <br>
 <i>Alias</i> to <code>contentType(MediaType.JSON).body(content)</code>.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> binary(<span class="_code_cls">Object</span> content)</pre></td>
        <td>Sets the <b><code>Content-Type: application/octet-stream</code> header and the content</b> of the HTTP response. <br>
 <i>Alias</i> to <code>contentType(MediaType.BINARY).body(content)</code>.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">boolean</span> mvc()</pre></td>
        <td>Checks whether the response model and view will be rendered in a MVC fashion.<br>
 A typical renderer would use <code>Resp#view</code> to get the view name, and <code>Resp#model</code> to get the model.
 A custom view renderer can be configured/implemented via the <code>On.custom().viewResolver(...)</code> method.<br></td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Resp</span> mvc(<span class="_code_cls">boolean</span> mvc)</pre></td>
        <td>Sets whether the response model and view will be rendered in a MVC fashion.<br>
 A typical renderer would use <code>Resp#view</code> to get the view name, and <code>Resp#model</code> to get the model.
 A custom view renderer can be configured/implemented via the <code>On.custom().viewResolver(...)</code> method.<br></td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">OutputStream</span> out()</pre></td>
        <td>First renders the response headers, then returns an <i>OutputStream</i> representing
 the <b>response body</b>. The response body will be constructed by writing to the <i>OutputStream</i>.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Req</span> request()</pre></td>
        <td>Gets the reference to the <b>request object</b>.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">boolean</span> login(<span class="_code_cls">String</span> username, <span class="_code_cls">String</span> password)</pre></td>
        <td>Initiates a user login process with the specified <b>username</b> and <b>password</b>.<br>
 After a successful login, the username will be persisted in the token.<br>
 Returns information whether the login was successful</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">void</span> logout()</pre></td>
        <td>Initiates a user logout process, clearing the login information (username) from the token.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">Screen</span> screen()</pre></td>
        <td>Provides access to the screen model for custom (MVC) page rendering.</td>
      </tr>
      <tr>
        <td><pre class="code-snippet"><span class="_code_cls">void</span> resume(<span class="_code_cls">AsyncLogic</span> asyncLogic)</pre></td>
        <td>Resumes the asynchronous request handling.</td>
      </tr>
    </table>
  </div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples">28. Examples</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_automatic_construction_and_serialization_of_javabeans">28.1. Automatic Construction and Serialization of JavaBeans</h3>
<div id="app-listing" class="listingblock">
<div class="title">Book.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.beanjson</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Book</span> {

        <span class="directive">public</span> <span class="predefined-type">String</span> title = <span class="string"><span class="delimiter">&quot;</span><span class="content">Untitled</span><span class="delimiter">&quot;</span></span>;

        <span class="directive">private</span> <span class="type">int</span> year;

        <span class="directive">public</span> <span class="type">int</span> getYear() {
                <span class="keyword">return</span> year;
        }

        <span class="directive">public</span> <span class="type">void</span> setYear(<span class="type">int</span> year) {
                <span class="local-variable">this</span>.year = year;
        }
}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">EasyBeans.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.beanjson</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.GET</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">EasyBeans</span> {

        <span class="annotation">@GET</span>
        <span class="directive">public</span> <span class="predefined-type">Book</span> echo(<span class="predefined-type">Book</span> book) {
                <span class="keyword">return</span> book;
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.beanjson</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_default_configuration">28.2. The default configuration</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.defaultcfg</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.goodies.ConfigHandler</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                <span class="comment">/* Let's take a look at the default configuration in Rapidoid */</span>
                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>).mvc(<span class="keyword">new</span> ConfigHandler());
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_edit_bean_properties">28.3. Edit bean properties</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.editmovie</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">Movie.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.editmovie</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Movie</span> {
        <span class="directive">public</span> <span class="predefined-type">String</span> title;
        <span class="directive">public</span> <span class="type">int</span> year;
}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">Movies.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.editmovie</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Page</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.docs.showmovie.Movie</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.gui.Btn</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.gui.GUI</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.gui.input.Form</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Movies</span> {

        <span class="annotation">@Page</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">Object</span> movie() {
                org.rapidoid.docs.showmovie.Movie movie = <span class="keyword">new</span> Movie();
                movie.title = <span class="string"><span class="delimiter">&quot;</span><span class="content">Chappie</span><span class="delimiter">&quot;</span></span>;
                movie.year = <span class="integer">2015</span>;

                Btn save = GUI.btn(<span class="string"><span class="delimiter">&quot;</span><span class="content">Save</span><span class="delimiter">&quot;</span></span>).primary();
                Form form = GUI.edit(movie).buttons(save);
                <span class="keyword">return</span> GUI.page(form).brand(<span class="string"><span class="delimiter">&quot;</span><span class="content">Edit movie details</span><span class="delimiter">&quot;</span></span>);
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exception_handlers">28.4. Exception handlers</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.errhandling</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.http.Req</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.My</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.run(args);

                My.errorHandler((req, resp, error) -&gt; {
                        <span class="keyword">return</span> resp.code(<span class="integer">200</span>).result(<span class="string"><span class="delimiter">&quot;</span><span class="content">Error: </span><span class="delimiter">&quot;</span></span> + error.getMessage());
                });

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/hi</span><span class="delimiter">&quot;</span></span>).html((Req req) -&gt; {
                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">RuntimeException</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">problem!</span><span class="delimiter">&quot;</span></span>);
                });
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_restful_services_with_lambda_handlers_jpa_jackson_and_bean_validation">28.5. RESTful services with Lambda handlers, JPA, Jackson and Bean Validation</h3>
<div id="app-listing" class="listingblock">
<div class="title">Book.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.gettingstarted</span>;

<span class="keyword">import</span> <span class="include">javax.persistence.Entity</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.GeneratedValue</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.Id</span>;
<span class="keyword">import</span> <span class="include">javax.validation.constraints.NotNull</span>;

<span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Book</span> {

        <span class="annotation">@Id</span>
        <span class="annotation">@GeneratedValue</span>
        <span class="directive">public</span> <span class="predefined-type">Long</span> id;

        <span class="annotation">@NotNull</span>
        <span class="directive">public</span> <span class="predefined-type">String</span> title;

        <span class="directive">public</span> <span class="type">int</span> year;

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.gettingstarted</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Valid</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.jpa.JPA</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args).jpa(); <span class="comment">// bootstrap JPA</span>

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/books</span><span class="delimiter">&quot;</span></span>).json(() -&gt; JPA.of(<span class="predefined-type">Book</span>.class).all()); <span class="comment">// get all books</span>

                On.post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/books</span><span class="delimiter">&quot;</span></span>).json((<span class="annotation">@Valid</span> <span class="predefined-type">Book</span> b) -&gt; JPA.save(b)); <span class="comment">// insert new book if valid</span>
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_rapidoid">28.6. Configuring Rapidoid</h3>
<div id="app-listing" class="listingblock">
<div class="title">Book.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.gettingstarted2</span>;

<span class="keyword">import</span> <span class="include">javax.persistence.Entity</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.GeneratedValue</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.Id</span>;
<span class="keyword">import</span> <span class="include">javax.validation.constraints.NotNull</span>;

<span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Book</span> {

        <span class="annotation">@Id</span>
        <span class="annotation">@GeneratedValue</span>
        <span class="directive">public</span> <span class="predefined-type">Long</span> id;

        <span class="annotation">@NotNull</span>
        <span class="directive">public</span> <span class="predefined-type">String</span> title;

        <span class="directive">public</span> <span class="type">int</span> year;

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.gettingstarted2</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Valid</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.jpa.JPA</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args).jpa(); <span class="comment">// bootstrap JPA</span>

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/books</span><span class="delimiter">&quot;</span></span>).json(() -&gt; JPA.of(<span class="predefined-type">Book</span>.class).all()); <span class="comment">// get all books</span>

                On.post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/books</span><span class="delimiter">&quot;</span></span>).json((<span class="annotation">@Valid</span> <span class="predefined-type">Book</span> b) -&gt; JPA.save(b)); <span class="comment">// insert new book if valid</span>
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">config-default.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="key">jdbc</span>:
  <span class="key">driver</span>: <span class="string"><span class="content">org.hsqldb.jdbc.JDBCDriver</span></span>
  <span class="key">url</span>: <span class="string"><span class="content">jdbc:hsqldb:mem:public</span></span>
  <span class="key">username</span>: <span class="string"><span class="content">sa</span></span>
  <span class="key">password</span>: <span class="string"><span class="content">''</span></span>

<span class="key">hibernate</span>:
  <span class="key">dialect</span>: <span class="string"><span class="content">org.hibernate.dialect.HSQLDialect</span></span></code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">config-dev.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="key">hibernate</span>:
  <span class="key">format_sql</span>: <span class="string"><span class="content">false</span></span>
  <span class="key">show_sql</span>: <span class="string"><span class="content">true</span></span>
  <span class="key">hbm2ddl</span>:
    <span class="key">auto</span>: <span class="string"><span class="content">update</span></span>

<span class="key">c3p0</span>:
  <span class="key">debug</span>: <span class="string"><span class="content">true</span></span></code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">config-mysql.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="key">jdbc</span>:
  <span class="key">driver</span>: <span class="string"><span class="content">com.mysql.jdbc.Driver</span></span>
  <span class="key">url</span>: <span class="string"><span class="content">jdbc:mysql://localhost:3306/rapidoid</span></span>
  <span class="key">username</span>: <span class="string"><span class="content">root</span></span>
  <span class="key">password</span>: <span class="string"><span class="content">root</span></span>

<span class="key">hibernate</span>:
  <span class="key">dialect</span>: <span class="string"><span class="content">org.hibernate.dialect.MySQL5Dialect</span></span></code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">config.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="key">on</span>:
  <span class="key">port</span>: <span class="string"><span class="content">8888</span></span>
  <span class="key">address</span>: <span class="string"><span class="content">0.0.0.0</span></span>

<span class="key">admin</span>:
  <span class="key">port</span>: <span class="string"><span class="content">same</span></span>
  <span class="key">address</span>: <span class="string"><span class="content">0.0.0.0</span></span>

<span class="key">app</span>:
  <span class="key">home</span>: <span class="string"><span class="content">/</span></span>
  <span class="key">contextPath</span>: <span class="string"><span class="content">/</span></span>

<span class="key">gui</span>:
  <span class="key">domain</span>: <span class="string"><span class="content">''</span></span>
  <span class="key">brand</span>: <span class="string"><span class="content">App</span></span>
  <span class="key">search</span>: <span class="string"><span class="content">false</span></span>
  <span class="key">navbar</span>: <span class="string"><span class="content">true</span></span>
  <span class="key">fluid</span>: <span class="string"><span class="content">false</span></span>
  <span class="key">cdn</span>: <span class="string"><span class="content">auto</span></span> <span class="comment"># in DEV mode is false, in PRODUCTION is true</span>
  <span class="key">menu</span>: <span class="string"><span class="content">{}</span></span>

<span class="key">users</span>:
  <span class="key">root</span>:
    <span class="key">roles</span>:
      - <span class="string"><span class="content">administrator</span></span>
      - <span class="string"><span class="content">owner</span></span>
    <span class="key">password</span>: <span class="string"><span class="content">root</span></span> <span class="comment"># PLEASE change this</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hello_web_pages">28.7. Hello, web pages!</h3>
<div id="app-listing" class="listingblock">
<div class="title">Hello.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.hello</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Page</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Hello</span> {

        <span class="annotation">@Page</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">String</span> hello() {
                <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, world!</span><span class="delimiter">&quot;</span></span>;
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.hello</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hello_restful_services">28.8. Hello RESTful services!</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.hellorest</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">MyCtrl.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.hellorest</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.GET</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">MyCtrl</span> {

        <span class="annotation">@GET</span>
        <span class="directive">public</span> <span class="predefined-type">String</span> hello() {
                <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, world!</span><span class="delimiter">&quot;</span></span>;
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_building_html_pages_with_java">28.9. Building HTML pages with Java</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.hi</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">YourName.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.hi</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Page</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.gui.GUI</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.html.Tag</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.web.Screen</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">YourName</span> {

        <span class="annotation">@Page</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/hi/{name}</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> Screen hi(<span class="predefined-type">String</span> name) {
                Tag msg = GUI.h4(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hi, </span><span class="delimiter">&quot;</span></span>, GUI.i(name), <span class="string"><span class="delimiter">&quot;</span><span class="content">!</span><span class="delimiter">&quot;</span></span>);
                <span class="keyword">return</span> GUI.page(msg).brand(<span class="string"><span class="delimiter">&quot;</span><span class="content">What is your name?</span><span class="delimiter">&quot;</span></span>);
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting_text_by_regular_expression_match">28.10. Highlighting Text by Regular Expression Match</h3>
<div id="app-listing" class="listingblock">
<div class="title">Highlighting.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.highlighting</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Page</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.gui.GUI</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Highlighting</span> <span class="directive">extends</span> GUI {

        <span class="annotation">@Page</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">Object</span> letters() {
                <span class="keyword">return</span> highlight(<span class="string"><span class="delimiter">&quot;</span><span class="content">ab-cd-efg</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="char">\\</span><span class="content">w+</span><span class="delimiter">&quot;</span></span>);
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.highlighting</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_server_configuration">28.11. Server Configuration</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httpargs</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.http.Req</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                <span class="comment">/* Initialize the configuration */</span>
                App.run(args);

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/hi</span><span class="delimiter">&quot;</span></span>).json((Req req) -&gt; req.data(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">unknown</span><span class="delimiter">&quot;</span></span>));
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_asynchronous_request_processing">28.12. Asynchronous request processing</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httpasync</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.http.Req</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.job.Jobs</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="keyword">import</span> <span class="include">java.util.concurrent.TimeUnit</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                <span class="comment">/* Wait 1 second before returning a response */</span>

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>).json((Req req) -&gt; Jobs.schedule(() -&gt; {

                        req.response().result(<span class="string"><span class="delimiter">&quot;</span><span class="content">OK</span><span class="delimiter">&quot;</span></span>).done();

                }, <span class="integer">1</span>, <span class="predefined-type">TimeUnit</span>.SECONDS));
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_more_control_over_the_http_server_setup">28.13. More control over the HTTP server setup</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httpcustom</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.config.Conf</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.Admin</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.AppBootstrap</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {

                <span class="comment">// first thing to do - initializing Rapidoid, without bootstrapping anything at the moment</span>
                AppBootstrap bootstrap = App.run(args); <span class="comment">// instead of App.bootstrap(args), which might start the server</span>

                <span class="comment">// customizing the server address and port - before the server is bootstrapped</span>
                On.address(<span class="string"><span class="delimiter">&quot;</span><span class="content">0.0.0.0</span><span class="delimiter">&quot;</span></span>).port(<span class="integer">9998</span>);
                Admin.address(<span class="string"><span class="delimiter">&quot;</span><span class="content">127.0.0.1</span><span class="delimiter">&quot;</span></span>).port(<span class="integer">9999</span>);

                <span class="comment">// fine-tuning the HTTP server</span>
                Conf.HTTP.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">maxPipeline</span><span class="delimiter">&quot;</span></span>, <span class="integer">32</span>);
                Conf.NET.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">bufSizeKB</span><span class="delimiter">&quot;</span></span>, <span class="integer">16</span>);

                <span class="comment">// now bootstrap some components, e.g. built-in services, classpath scanning (beans), JMX, Admin Center</span>
                bootstrap.services().beans().jmx().adminCenter();

                <span class="comment">// continue with normal setup</span>
                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).json(<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>);
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_generic_handlers_match_any_request">28.14. Generic handlers match any request</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httpgeneric</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.u.U</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                <span class="comment">/* Generic handlers match any request (in the declaration order) */</span>

                On.req(req -&gt; req.data().isEmpty() ? <span class="string"><span class="delimiter">&quot;</span><span class="content">Simple: </span><span class="delimiter">&quot;</span></span> + req.uri() : <span class="predefined-constant">null</span>);

                <span class="comment">/* The next handler is executed if the previous returns [NOT FOUND] */</span>

                On.req(req -&gt; U.list(req.verb(), req.uri(), req.data()));
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_returning_a_not_found_result">28.15. Returning a "Not Found" result</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httpnotfound</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.http.Req</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                <span class="comment">/* Returning a [null] means [NOT FOUND] */</span>

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>).json((Req req) -&gt; {
                        <span class="keyword">return</span> req.params().size() == <span class="integer">1</span> ? req.params() : <span class="predefined-constant">null</span>;
                });
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_http_redirect">28.16. HTTP redirect</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httpredir</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.http.Req</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>).html((Req x) -&gt; x.response().redirect(<span class="string"><span class="delimiter">&quot;</span><span class="content">/hi</span><span class="delimiter">&quot;</span></span>));
                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/hi</span><span class="delimiter">&quot;</span></span>).html(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hi!</span><span class="delimiter">&quot;</span></span>);
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_all_the_request_data_is_in_the_req_req_parameter">28.17. All the request data is in the (Req req) parameter</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httpreq1</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.http.Req</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                <span class="comment">/* Retrieving request info from the Req parameter */</span>

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/showVerb</span><span class="delimiter">&quot;</span></span>).json((Req req) -&gt; req.verb());

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/showPath</span><span class="delimiter">&quot;</span></span>).json((Req req) -&gt; req.path());

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/showUri</span><span class="delimiter">&quot;</span></span>).json((Req req) -&gt; req.uri());

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/showData</span><span class="delimiter">&quot;</span></span>).json((Req req) -&gt; req.data());
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rendering_a_http_response">28.18. Rendering a HTTP response</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httpresp</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.http.MediaType</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.http.Req</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.http.Resp</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {

                <span class="comment">/* Returning the request or response object means the response was constructed */</span>

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>).html((Req req) -&gt; {
                        Resp resp = req.response();
                        resp.contentType(MediaType.JSON);
                        resp.result(<span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span>);
                        <span class="keyword">return</span> resp;
                });
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_manipulating_the_response_code">28.19. Manipulating the response code</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httprespcode</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.http.Req</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>).html((Req req) -&gt; req.response().result(<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>).code(<span class="integer">404</span>));
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_manipulating_the_response_content_type">28.20. Manipulating the response content type</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httpresptype</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.http.MediaType</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.http.Req</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.http.Resp</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                <span class="comment">/* The response type will be JSON, instead of HTML */</span>

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>).html((Req req) -&gt; {
                        Resp resp = req.response();
                        resp.contentType(MediaType.JSON);
                        resp.result(<span class="string"><span class="delimiter">&quot;</span><span class="content">abc</span><span class="delimiter">&quot;</span></span>);
                        <span class="keyword">return</span> resp;
                });
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_http_handlers_and_routing">28.21. HTTP handlers and routing</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httproute</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.http.Req</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                <span class="comment">/* Request handlers should match both the verb and the path: */</span>

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>).json(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hi!</span><span class="delimiter">&quot;</span></span>);

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).html(<span class="string"><span class="delimiter">&quot;</span><span class="content">Getting X</span><span class="delimiter">&quot;</span></span>);

                On.post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).json((Req req) -&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">Posting X</span><span class="delimiter">&quot;</span></span>);

                On.delete(<span class="string"><span class="delimiter">&quot;</span><span class="content">/x</span><span class="delimiter">&quot;</span></span>).html((Req req) -&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;b&gt;Deleting X&lt;/b&gt;</span><span class="delimiter">&quot;</span></span>);
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_server_side_session_a_k_a_session">28.22. Server-side session (a.k.a. Session)</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httpsessionmem</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                On.req(req -&gt; {
                        <span class="type">int</span> counter = req.session(<span class="string"><span class="delimiter">&quot;</span><span class="content">n</span><span class="delimiter">&quot;</span></span>, <span class="integer">0</span>) + <span class="integer">1</span>;
                        req.session().put(<span class="string"><span class="delimiter">&quot;</span><span class="content">n</span><span class="delimiter">&quot;</span></span>, counter);
                        <span class="keyword">return</span> counter;
                });
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_restful_service_one_liner">28.23. RESTful service one-liner</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httpsimple</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                <span class="comment">/* On [GET /size] return the length of the &quot;msg&quot; parameter */</span>

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/size</span><span class="delimiter">&quot;</span></span>).json((<span class="predefined-type">String</span> msg) -&gt; msg.length());
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_instant_web_application">28.24. Instant web application</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httpsimplegui</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                <span class="comment">/* On [GET /hi] or [POST /hi] return a &quot;Hello World&quot; web page */</span>

                On.page(<span class="string"><span class="delimiter">&quot;</span><span class="content">/hi</span><span class="delimiter">&quot;</span></span>).mvc(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello &lt;b&gt;world&lt;/b&gt;!</span><span class="delimiter">&quot;</span></span>);
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">config.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="key">gui</span>:
  <span class="key">brand</span>: <span class="string"><span class="content">'Cool app!'</span></span>
  <span class="key">title</span>: <span class="string"><span class="content">'the head title'</span></span>
  <span class="key">search</span>: <span class="string"><span class="content">true</span></span>
  <span class="key">menu</span>:
    <span class="key">Home</span>: <span class="string"><span class="content">/</span></span>
    <span class="key">Portfolio</span>: <span class="string"><span class="content">/portfolio</span></span>
    <span class="key">About</span>:
      <span class="key">About Us</span>: <span class="string"><span class="content">/about</span></span>
      <span class="key">About You</span>: <span class="string"><span class="content">/</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_stopping_the_server">28.25. Stopping the server</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httpstop</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                On.setup().shutdown();
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_client_side_token_as_a_session">28.26. Client-side Token as a session</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httptoken</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                On.req(req -&gt; {
                        <span class="type">int</span> counter = req.token(<span class="string"><span class="delimiter">&quot;</span><span class="content">n</span><span class="delimiter">&quot;</span></span>, <span class="integer">0</span>) + <span class="integer">1</span>;
                        req.token().put(<span class="string"><span class="delimiter">&quot;</span><span class="content">n</span><span class="delimiter">&quot;</span></span>, counter);
                        <span class="keyword">return</span> counter;
                });
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_request_wrappers_interceptors">28.27. Request wrappers (interceptors)</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.httpwrap</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                <span class="comment">/* A wrapper executes before the handler */</span>

                On.defaults().wrappers((req, next) -&gt; {
                        <span class="keyword">return</span> next.invokeAndTransformResult(result -&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">Hey: </span><span class="delimiter">&quot;</span></span> + result);
                });

                <span class="comment">/* and provides transformation for the result */</span>

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/size</span><span class="delimiter">&quot;</span></span>).json((<span class="predefined-type">String</span> s) -&gt; s.length());
                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/upper</span><span class="delimiter">&quot;</span></span>).json((<span class="predefined-type">String</span> s) -&gt; s.toUpperCase());
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dependency_injection_of_singletons">28.28. Dependency injection of singletons</h3>
<div id="app-listing" class="listingblock">
<div class="title">Bar.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.injection</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.GET</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="annotation">@Controller</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/bar</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Bar</span> {

        <span class="annotation">@Inject</span>
        <span class="directive">public</span> Foo foo;

        <span class="annotation">@GET</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/hi</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">String</span> hello() {
                <span class="keyword">return</span> foo.msg();
        }

        <span class="directive">public</span> <span class="predefined-type">String</span> msg() {
                <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello from Bar!</span><span class="delimiter">&quot;</span></span>;
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">Foo.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.injection</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.GET</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="annotation">@Controller</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/foo</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Foo</span> {

        <span class="annotation">@Inject</span>
        <span class="directive">public</span> Bar bar;

        <span class="directive">private</span> <span class="type">int</span> count;

        <span class="annotation">@GET</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/hi</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">String</span> hello() {
                <span class="keyword">return</span> ++count + <span class="string"><span class="delimiter">&quot;</span><span class="content">: </span><span class="delimiter">&quot;</span></span> + bar.msg();
        }

        <span class="directive">public</span> <span class="predefined-type">String</span> msg() {
                <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello from Foo!</span><span class="delimiter">&quot;</span></span>;
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.injection</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_restful_services_with_jpa_crud">28.29. RESTful services with JPA CRUD</h3>
<div id="app-listing" class="listingblock">
<div class="title">Book.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.jpacrud</span>;

<span class="keyword">import</span> <span class="include">javax.persistence.Entity</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.GeneratedValue</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.Id</span>;
<span class="keyword">import</span> <span class="include">javax.validation.constraints.NotNull</span>;

<span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Book</span> {

        <span class="annotation">@Id</span>
        <span class="annotation">@GeneratedValue</span>
        <span class="directive">public</span> <span class="predefined-type">Long</span> id;

        <span class="annotation">@NotNull</span>
        <span class="directive">public</span> <span class="predefined-type">String</span> title;

        <span class="directive">public</span> <span class="type">int</span> year;

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.jpacrud</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.jpa.JPA</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="keyword">import</span> <span class="include">javax.validation.Valid</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args).jpa(); <span class="comment">// bootstrap JPA</span>

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/books</span><span class="delimiter">&quot;</span></span>).json(() -&gt; JPA.of(<span class="predefined-type">Book</span>.class).all());
                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/books/{id}</span><span class="delimiter">&quot;</span></span>).json((<span class="predefined-type">Integer</span> id) -&gt; JPA.get(<span class="predefined-type">Book</span>.class, id));

                On.post(<span class="string"><span class="delimiter">&quot;</span><span class="content">/books</span><span class="delimiter">&quot;</span></span>).json((<span class="annotation">@Valid</span> <span class="predefined-type">Book</span> b) -&gt; JPA.save(b));
                On.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">/books</span><span class="delimiter">&quot;</span></span>).json((<span class="annotation">@Valid</span> <span class="predefined-type">Book</span> b) -&gt; JPA.update(b));
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jpa_scaffolding">28.30. JPA Scaffolding</h3>
<div id="app-listing" class="listingblock">
<div class="title">Book.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.jpascaffold</span>;

<span class="keyword">import</span> <span class="include">javax.persistence.Entity</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.GeneratedValue</span>;
<span class="keyword">import</span> <span class="include">javax.persistence.Id</span>;

<span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Book</span> {

        <span class="annotation">@Id</span>
        <span class="annotation">@GeneratedValue</span>
        <span class="directive">public</span> <span class="predefined-type">Long</span> id;

        <span class="directive">public</span> <span class="predefined-type">String</span> title;

        <span class="directive">public</span> <span class="type">int</span> year;

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.jpascaffold</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.goodies.X</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.gui.GUI</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.jpa.JPA</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.u.U</span>;

<span class="keyword">import</span> <span class="include">java.util.List</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> <span class="directive">extends</span> GUI {

        <span class="annotation">@SuppressWarnings</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">unchecked</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {

                On.page(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>).mvc(<span class="string"><span class="delimiter">&quot;</span><span class="content">Welcome!</span><span class="delimiter">&quot;</span></span>);
                X.scaffold(<span class="predefined-type">Book</span>.class);

                <span class="predefined-type">String</span> search = <span class="string"><span class="delimiter">&quot;</span><span class="content">FROM Book b WHERE b.title LIKE ?1</span><span class="delimiter">&quot;</span></span>;
                On.page(<span class="string"><span class="delimiter">&quot;</span><span class="content">/search</span><span class="delimiter">&quot;</span></span>).mvc((<span class="predefined-type">String</span> q) -&gt; {
                        <span class="predefined-type">List</span>&lt;<span class="predefined-type">Book</span>&gt; records = JPA.jpql(search, <span class="string"><span class="delimiter">&quot;</span><span class="content">%</span><span class="delimiter">&quot;</span></span> + q + <span class="string"><span class="delimiter">&quot;</span><span class="content">%</span><span class="delimiter">&quot;</span></span>).all();
                        <span class="keyword">return</span> U.list(h2(<span class="string"><span class="delimiter">&quot;</span><span class="content">Searching for: </span><span class="delimiter">&quot;</span></span>, q), grid(records));
                });
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">config.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="key">gui</span>:
  <span class="key">brand</span>: <span class="string"><span class="content">'Cool app'</span></span>
  <span class="key">search</span>: <span class="string"><span class="content">true</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bootstrap_based_gui_layout">28.31. Bootstrap-based GUI layout</h3>
<div id="app-listing" class="listingblock">
<div class="title">BootstrapLayout.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.layout</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Page</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.gui.GUI</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.html.Tag</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">BootstrapLayout</span> <span class="directive">extends</span> GUI {

        <span class="annotation">@Page</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">Object</span> layout() {
                Tag r1 = row(col4(<span class="string"><span class="delimiter">&quot;</span><span class="content">A</span><span class="delimiter">&quot;</span></span>), col4(<span class="string"><span class="delimiter">&quot;</span><span class="content">B</span><span class="delimiter">&quot;</span></span>), col4(<span class="string"><span class="delimiter">&quot;</span><span class="content">C</span><span class="delimiter">&quot;</span></span>));
                Tag r2 = row(col1(<span class="string"><span class="delimiter">&quot;</span><span class="content">2/12</span><span class="delimiter">&quot;</span></span>), col7(<span class="string"><span class="delimiter">&quot;</span><span class="content">7/12</span><span class="delimiter">&quot;</span></span>), col4(<span class="string"><span class="delimiter">&quot;</span><span class="content">3/12</span><span class="delimiter">&quot;</span></span>));
                Tag r3 = mid4(<span class="string"><span class="delimiter">&quot;</span><span class="content">4/12 in the middle</span><span class="delimiter">&quot;</span></span>);
                <span class="keyword">return</span> multi(r1, r2, r3);
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.layout</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mvc_architecture_with_rapidoid_s_built_in_template_engine">28.32. MVC architecture with Rapidoid&#8217;s built-in template engine</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.mvc</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.gui.GUI</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.http.Req</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.http.Resp</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.u.U</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {

                <span class="comment">/* The handler for [/msg] returns the model */</span>
                <span class="comment">/* The default view name is [msg] */</span>
                <span class="comment">/* So the corresponding template is [templates/msg.html] */</span>

                On.page(<span class="string"><span class="delimiter">&quot;</span><span class="content">/msg</span><span class="delimiter">&quot;</span></span>).mvc(() -&gt; {
                        <span class="keyword">return</span> U.map(<span class="string"><span class="delimiter">&quot;</span><span class="content">count</span><span class="delimiter">&quot;</span></span>, <span class="integer">12</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">oki</span><span class="delimiter">&quot;</span></span>, GUI.btn(<span class="string"><span class="delimiter">&quot;</span><span class="content">OK</span><span class="delimiter">&quot;</span></span>));
                });

                <span class="comment">/* A custom view name can be assigned. */</span>
                <span class="comment">/* In this case the default view name is [abc], */</span>
                <span class="comment">/* but a custom view name [msg] was specified */</span>

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/abc</span><span class="delimiter">&quot;</span></span>).view(<span class="string"><span class="delimiter">&quot;</span><span class="content">msg</span><span class="delimiter">&quot;</span></span>).mvc((Req req, Resp resp) -&gt; {
                        <span class="keyword">return</span> U.map(<span class="string"><span class="delimiter">&quot;</span><span class="content">count</span><span class="delimiter">&quot;</span></span>, <span class="integer">100</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">oki</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>);
                });
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">templates/msg.html</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>
    You have <span class="tag">&lt;span</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">badge</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>${count}<span class="tag">&lt;/span&gt;</span> new messages.
<span class="tag">&lt;/p&gt;</span>

@{oki}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_custom_entitymanager_provider">28.33. Custom EntityManager provider</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.myem</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.jpa.JPA</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.My</span>;

<span class="keyword">import</span> <span class="include">javax.persistence.EntityManager</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {

                <span class="comment">/* Use the built-in entity manager, and decorate it */</span>

                My.entityManagerProvider(req -&gt; {
                        EntityManager em = JPA.em();
                        <span class="comment">/// em = new SomeEntityManagerDecorator(em);</span>
                        <span class="keyword">return</span> em;
                });

        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_custom_entitymanagerfactory_provider">28.34. Custom EntityManagerFactory provider</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.myemf</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.My</span>;

<span class="keyword">import</span> <span class="include">javax.persistence.EntityManagerFactory</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {

                <span class="comment">/* The EntityManagerFactory's should be properly initialized */</span>

                EntityManagerFactory emf1 = <span class="predefined-constant">null</span>; <span class="comment">// FIXME</span>
                EntityManagerFactory emf2 = <span class="predefined-constant">null</span>; <span class="comment">// FIXME</span>

                My.entityManagerFactoryProvider(req -&gt; {
                        <span class="keyword">return</span> req.path().startsWith(<span class="string"><span class="delimiter">&quot;</span><span class="content">/db1/</span><span class="delimiter">&quot;</span></span>) ? emf1 : emf2;
                });

        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_custom_template_loader">28.35. Custom template loader</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.mytemplatesloader</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.My</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {

                <span class="comment">/* Dummy template loader - constructs templates on-the-fly */</span>

                My.templateLoader(filename -&gt; {
                        <span class="predefined-type">String</span> tmpl = <span class="string"><span class="delimiter">&quot;</span><span class="content">In </span><span class="delimiter">&quot;</span></span> + filename + <span class="string"><span class="delimiter">&quot;</span><span class="content">: x = &lt;b&gt;${x}&lt;/b&gt;</span><span class="delimiter">&quot;</span></span>;
                        <span class="keyword">return</span> tmpl.getBytes();
                });

                <span class="comment">// The URL parameters will be the MVC model</span>

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/showx</span><span class="delimiter">&quot;</span></span>).mvc((req) -&gt; req.params());
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_key_value_data_grid_from_a_map">28.36. Create key-value data grid from a Map</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.paramgrid</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">ParamGrid.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.paramgrid</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Page</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.gui.GUI</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.http.Req</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">ParamGrid</span> {

        <span class="annotation">@Page</span>
        <span class="directive">public</span> <span class="predefined-type">Object</span> table(Req req) {
                <span class="keyword">return</span> GUI.page(GUI.grid(req.params())).brand(<span class="string"><span class="delimiter">&quot;</span><span class="content">Request parameters</span><span class="delimiter">&quot;</span></span>);
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_high_level_annotation_based_pojo_controllers">28.37. High-level annotation-based POJO controllers</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.pojoctrl</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.GET</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.POST</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Param</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.http.Req</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.http.Resp</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="comment">/**
         * Any object can be a POJO controller.&lt;br&gt;
         * Just annotate the request handler methods with: &lt;b&gt;@GET&lt;/b&gt;, &lt;b&gt;@POST&lt;/b&gt;
         * , &lt;b&gt;@PUT&lt;/b&gt;, &lt;b&gt;@DELETE&lt;/b&gt; etc.
         */</span>
        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.run(args);

                App.beans(<span class="keyword">new</span> <span class="predefined-type">Object</span>() {

                        <span class="annotation">@GET</span>
                        <span class="directive">public</span> <span class="predefined-type">String</span> upper(<span class="annotation">@Param</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">s</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> s) {
                                <span class="keyword">return</span> s.toUpperCase();
                        }

                        <span class="annotation">@POST</span>
                        <span class="directive">public</span> <span class="predefined-type">String</span> lower(Req req, Resp resp, <span class="annotation">@Param</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> s) {
                                <span class="keyword">return</span> s.toLowerCase();
                        }

                });
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_application_profiles">28.38. Application Profiles</h3>
<div id="app-listing" class="listingblock">
<div class="title">FooCtrl.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.profiles</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.GET</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Profiles</span>;

<span class="annotation">@Controller</span>
<span class="annotation">@Profiles</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">FooCtrl</span> {

        <span class="annotation">@GET</span>
        <span class="directive">public</span> <span class="predefined-type">String</span> hi() {
                <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">hi, FOO controller!</span><span class="delimiter">&quot;</span></span>;
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.profiles</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.config.Conf</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.env.Env</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.gui.GUI</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="keyword">import</span> <span class="include">java.util.Map</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args, <span class="string"><span class="delimiter">&quot;</span><span class="content">profiles=mysql,foo</span><span class="delimiter">&quot;</span></span>);

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/profiles</span><span class="delimiter">&quot;</span></span>).mvc(() -&gt; GUI.display(Env.profiles()));

                <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; myConfig = Conf.section(<span class="string"><span class="delimiter">&quot;</span><span class="content">my</span><span class="delimiter">&quot;</span></span>).toMap();
                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/my</span><span class="delimiter">&quot;</span></span>).mvc(() -&gt; GUI.grid(myConfig));
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">OtherCtrl.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.profiles</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.GET</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Profiles</span>;

<span class="annotation">@Controller</span>
<span class="annotation">@Profiles</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">default</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">OtherCtrl</span> {

        <span class="annotation">@GET</span>
        <span class="directive">public</span> <span class="predefined-type">String</span> hi() {
                <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">hi, OTHER controller!</span><span class="delimiter">&quot;</span></span>;
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">config-foo.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="key">my</span>:
  <span class="key">msg</span>: <span class="string"><span class="content">'hello from Foo!'</span></span></code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">config.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="key">gui</span>:
  <span class="key">navbar</span>: <span class="string"><span class="content">false</span></span>

<span class="key">my</span>:
  <span class="key">msg</span>: <span class="string"><span class="content">'hello!'</span></span>
  <span class="key">desc</span>: <span class="string"><span class="content">'simple example'</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_raw_html_pages">28.39. Raw HTML pages</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.raw</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">Simple.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.raw</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Page</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Simple</span> {

        <span class="annotation">@Page</span>
        <span class="directive">public</span> <span class="predefined-type">Object</span> simple() {
                <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;p&gt;&lt;b&gt;RAW&lt;/b&gt; HTML!&lt;p&gt;</span><span class="delimiter">&quot;</span></span>;
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_automatic_json_serialization_of_data_structures">28.40. Automatic JSON Serialization of Data Structures</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.restjson</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">TextTools.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.restjson</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.GET</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.POST</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.u.U</span>;

<span class="keyword">import</span> <span class="include">java.util.Map</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">TextTools</span> {

        <span class="annotation">@GET</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/upper/{s}</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; upper(<span class="predefined-type">String</span> s) {
                <span class="predefined-type">String</span> big = s.toUpperCase();
                <span class="keyword">return</span> U.map(<span class="string"><span class="delimiter">&quot;</span><span class="content">normal</span><span class="delimiter">&quot;</span></span>, s, <span class="string"><span class="delimiter">&quot;</span><span class="content">big</span><span class="delimiter">&quot;</span></span>, big);
        }

        <span class="annotation">@POST</span>
        <span class="directive">public</span> <span class="predefined-type">String</span><span class="type">[]</span> parts(<span class="predefined-type">String</span> text) {
                <span class="keyword">return</span> text.split(<span class="string"><span class="delimiter">&quot;</span><span class="content">-</span><span class="delimiter">&quot;</span></span>);
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_named_url_parameters">28.41. Named URL Parameters</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.restnamedparams</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">NamedParams.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.restnamedparams</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.GET</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Param</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">NamedParams</span> {

        <span class="annotation">@GET</span>
        <span class="directive">public</span> <span class="type">int</span> sum(<span class="type">int</span> x, <span class="annotation">@Param</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span>) <span class="type">int</span> z) {
                <span class="keyword">return</span> x + z;
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_url_pattern_matching">28.42. URL pattern matching</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.restparams</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">SubUrlParams.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.restparams</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.GET</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.POST</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.u.U</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">SubUrlParams</span> {

        <span class="annotation">@GET</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/hey/{name}/{age:</span><span class="char">\\</span><span class="content">d+}</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">String</span> hey(<span class="predefined-type">String</span> name, <span class="type">int</span> age) {
                <span class="keyword">return</span> U.frmt(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hey %s (%s)</span><span class="delimiter">&quot;</span></span>, name, age);
        }

        <span class="annotation">@POST</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/size/{s}</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="type">int</span> size(<span class="predefined-type">String</span> s) {
                <span class="keyword">return</span> s.length();
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_programmatic_setup_of_reverse_proxy_and_load_balancer">28.43. Programmatic setup of reverse proxy and load balancer</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.revproxy</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.http.Req</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.reverseproxy.Reverse</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/a*</span><span class="delimiter">&quot;</span></span>).json(Req::uri);

                Reverse.proxy(<span class="string"><span class="delimiter">&quot;</span><span class="content">/g</span><span class="delimiter">&quot;</span></span>)
                        .roles(<span class="string"><span class="delimiter">&quot;</span><span class="content">administrator</span><span class="delimiter">&quot;</span></span>)
                        .cacheTTL(<span class="integer">1000</span>)
                        .to(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://upstream1:8080</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">http://upstream2:8080</span><span class="delimiter">&quot;</span></span>)
                        .add();
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_custom_load_balancer">28.44. Custom load balancer</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.revproxylb</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.http.Req</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.reverseproxy.LoadBalancer</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.reverseproxy.ProxyUpstream</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.reverseproxy.Reverse</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;

<span class="keyword">import</span> <span class="include">java.util.List</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);

                LoadBalancer lb = (Req req, <span class="predefined-type">List</span>&lt;ProxyUpstream&gt; candidates) -&gt; {
                        <span class="type">int</span> index = <span class="integer">0</span>; <span class="comment">// FIXME implement load balancing strategy</span>
                        <span class="keyword">return</span> candidates.get(index);
                };

                Reverse.proxy(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>)
                        .to(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://upstream1:8080</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">http://upstream2:8080</span><span class="delimiter">&quot;</span></span>)
                        .loadBalancer(lb)
                        .add();
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reverse_proxy_matching_by_uri_prefix">28.45. Reverse proxy matching by URI prefix</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.revproxyself</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.reverseproxy.Reverse</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);

                <span class="predefined-type">String</span> fooUpstream = <span class="string"><span class="delimiter">&quot;</span><span class="content">localhost:8080/foo</span><span class="delimiter">&quot;</span></span>;

                Reverse.proxy(<span class="string"><span class="delimiter">&quot;</span><span class="content">/bar</span><span class="delimiter">&quot;</span></span>).to(fooUpstream).add();
                Reverse.proxy(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>).to(fooUpstream).add();

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/foo</span><span class="delimiter">&quot;</span></span>).html(<span class="string"><span class="delimiter">&quot;</span><span class="content">FOO</span><span class="delimiter">&quot;</span></span>);
                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/foo/hi</span><span class="delimiter">&quot;</span></span>).html(<span class="string"><span class="delimiter">&quot;</span><span class="content">FOO HI</span><span class="delimiter">&quot;</span></span>);
                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/foo/hello</span><span class="delimiter">&quot;</span></span>).html(<span class="string"><span class="delimiter">&quot;</span><span class="content">FOO HELLO</span><span class="delimiter">&quot;</span></span>);
                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/bar/hi</span><span class="delimiter">&quot;</span></span>).html(<span class="string"><span class="delimiter">&quot;</span><span class="content">BAR HI</span><span class="delimiter">&quot;</span></span>);
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_role_based_security">28.46. Role-based security</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.security</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.My</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.u.U</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args).auth();

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>).html((req, resp) -&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">this is public!</span><span class="delimiter">&quot;</span></span>);

                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/manage</span><span class="delimiter">&quot;</span></span>).roles(<span class="string"><span class="delimiter">&quot;</span><span class="content">manager</span><span class="delimiter">&quot;</span></span>).html((req, resp) -&gt; <span class="string"><span class="delimiter">&quot;</span><span class="content">this is private!</span><span class="delimiter">&quot;</span></span>);

                <span class="comment">/* Dummy login: successful if the username is the same as the password */</span>

                My.loginProvider((req, username, password) -&gt; username.equals(password));

                <span class="comment">/* Gives the 'manager' role to every logged-in user */</span>

                My.rolesProvider((req, username) -&gt; U.set(<span class="string"><span class="delimiter">&quot;</span><span class="content">manager</span><span class="delimiter">&quot;</span></span>));
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">MyCtrl.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.security</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.GET</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.security.Role</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.security.annotation.Administrator</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.security.annotation.Roles</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.u.U</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">MyCtrl</span> {

        <span class="annotation">@GET</span>
        <span class="annotation">@Administrator</span>
        <span class="annotation">@Roles</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">manager</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">Role</span>.MODERATOR})
        <span class="directive">public</span> <span class="predefined-type">Object</span> hi() {
                <span class="keyword">return</span> U.map(<span class="string"><span class="delimiter">&quot;</span><span class="content">msg</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">hi!</span><span class="delimiter">&quot;</span></span>);
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_display_bean_properties">28.47. Display bean properties</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.showmovie</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.App</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                App.bootstrap(args);
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">Movie.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.showmovie</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Movie</span> {
        <span class="directive">public</span> <span class="predefined-type">String</span> title;
        <span class="directive">public</span> <span class="type">int</span> year;
}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">Movies.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.showmovie</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Controller</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.annotation.Page</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.gui.GUI</span>;
<span class="keyword">import</span> <span class="include">org.rapidoid.gui.input.Form</span>;

<span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Movies</span> {

        <span class="annotation">@Page</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>)
        <span class="directive">public</span> <span class="predefined-type">Object</span> movie() {
                Movie movie = <span class="keyword">new</span> Movie();
                movie.title = <span class="string"><span class="delimiter">&quot;</span><span class="content">Chappie</span><span class="delimiter">&quot;</span></span>;
                movie.year = <span class="integer">2015</span>;

                Form form = GUI.show(movie).buttons(GUI.btn(<span class="string"><span class="delimiter">&quot;</span><span class="content">OK</span><span class="delimiter">&quot;</span></span>));
                <span class="keyword">return</span> GUI.page(form).brand(<span class="string"><span class="delimiter">&quot;</span><span class="content">Movie details</span><span class="delimiter">&quot;</span></span>);
        }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_serving_static_files_from_the_default_locations">28.48. Serving static files from the default locations</h3>
<div id="app-listing" class="listingblock">
<div class="title">Main.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.rapidoid.docs.staticfiles</span>;

<span class="keyword">import</span> <span class="include">org.rapidoid.setup.On</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">Main</span> {

        <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
                On.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>).html(<span class="string"><span class="delimiter">&quot;</span><span class="content">Home</span><span class="delimiter">&quot;</span></span>);
        }

}</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">c.html</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">Hello from C!</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">static/a.html</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">Hello from A!</code></pre>
</div>
</div>
<div id="app-listing" class="listingblock">
<div class="title">static/b.html</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">Hello from B!</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-12-01 17:13:50 CET
</div>
</div>
</body>
</html>